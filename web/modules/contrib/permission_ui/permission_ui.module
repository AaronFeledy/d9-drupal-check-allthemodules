<?php

/**
 * @file
 * Contains Permission UI functionality.
 */

use Drupal\permission_ui\RoleListBuilder;

/**
 * Implements hook_menu_local_tasks_alter().
 *
 * Hides the 'Contact' tab on the user profile if the user does not have an
 * email address configured.
 */
function permission_ui_menu_local_tasks_alter(&$data, $route_name) {
  if (isset($data['tabs'][0])) {
    foreach ($data['tabs'][0] as $href => &$tab_data) {
      if ($href == 'user.admin_permissions') {
        $tab_data['#link']['title'] = 'Permissions + Roles';
        $tab_data['#weight'] = 11;
      }
      if ($href == 'entity.user.collection') {
        $tab_data['#link']['title'] = 'Users';
      }
    }
  }
}

/**
 * Implements hook_entity_type_alter().
 */
function permission_ui_entity_type_alter(array &$entity_types) {
  /* @var $entity_types \Drupal\Core\Entity\EntityTypeInterface[] */
  $entity_types['user_role']->setHandlerClass('list_builder', RoleListBuilder::class);
}
