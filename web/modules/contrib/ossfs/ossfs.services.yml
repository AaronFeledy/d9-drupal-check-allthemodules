services:
  cache.ossfs:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin }
    factory: 'cache_factory:get'
    arguments: [ossfs]
  ossfs.storage:
    class: Drupal\ossfs\OssfsCachedStorage
    arguments: ['@ossfs.storage.active', '@cache.ossfs']
  ossfs.storage.active:
    class: Drupal\ossfs\OssfsDatabaseStorage
    arguments: ['@database']
    public: false
    tags:
      - { name: backend_overridable }
  ossfs_transfer:
    class: Drupal\ossfs\OssfsTransfer
    arguments: ['@database', '@config.factory', '@cache.ossfs']
  stream_wrapper.ossfs:
    class: Drupal\ossfs\StreamWrapper\OssfsStream
    tags:
      - { name: stream_wrapper, scheme: oss }
