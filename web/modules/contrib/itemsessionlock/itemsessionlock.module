<?php

/**
 * @file
 * Install, update and uninstall functions.
 */


/**
 * Helper function: tries to lock an item.
 * @param string $type implementation item.
 * @param string $iid item unique identifier.
 * @param string $redirect a route to redirect to if lock can't be acquired.
 * @param mix $data arbitratry data to store with the lock.
 */
function itemsessionlock_item_ensure_lock($type, $iid, $redirect = '', $data = NULL) {
  // Load needed plugin.
  $manager = \Drupal::service('plugin.manager.itemsessionlock');
  $plugin = $manager->createInstance($type, array('iid' => $iid, 'data' => $data));
  $plugin->ensureLock($redirect);
}
