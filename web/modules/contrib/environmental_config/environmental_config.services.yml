services:
  environmental_config.tmpfoldermanager:
    class: \Drupal\environmental_config\TmpConfigFolderManager
    arguments: ['@service_container']
    factory: ['\Drupal\environmental_config\TmpConfigFolderManager', create]

  plugin.manager.environmental_config.environmentdetectormanager:
    class: Drupal\environmental_config\EnvironmentDetectorManager
    parent: default_plugin_manager

  logger.channel.environmental_config:
    parent: logger.channel_base
    arguments: ['environmental_config']

  cache.environmental_config:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin }
    factory: 'cache_factory:get'
    arguments: [environmental_config]

  environmental_config.command.envimport:
    class: Drupal\environmental_config\Command\EnvImportCommand
    arguments:
      - '@config.storage'
      - '@config.manager'
      - '@environmental_config.tmpfoldermanager'
      - '@plugin.manager.environmental_config.environmentdetectormanager'
      - '@event_dispatcher'
      - '@lock'
      - '@config.typed'
      - '@module_handler'
      - '@module_installer'
      - '@theme_handler'
      - '@string_translation'
    tags:
      - { name: drupal.command }
