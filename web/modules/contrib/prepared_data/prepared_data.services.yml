services:
  prepared_data.factory:
    class: Drupal\prepared_data\DataFactory
    arguments: ['@prepared_data.provider_manager', '@prepared_data.processor_manager']
  prepared_data.processor_manager:
    class: Drupal\prepared_data\Processor\ProcessorManager
    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler', '@config.factory', '@state']
  prepared_data.provider_manager:
    class: Drupal\prepared_data\Provider\ProviderManager
    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler', '@prepared_data.storage', '@prepared_data.builder', '@current_user']
  prepared_data.shorthands:
    class: Drupal\prepared_data\Shorthand\ShorthandsFactory
    calls:
      - [setShorthandStorage, ['@prepared_data.shorthand_storage']]
  prepared_data.builder:
    class: Drupal\prepared_data\Builder\DataBuilder
    arguments: ['@prepared_data.processor_manager', '@module_handler', '@logger.channel.prepared_data']
  prepared_data.serializer:
    class: Drupal\prepared_data\Serialization\JsonSerializer
  prepared_data.commands:
    class: Drupal\prepared_data\Commands\PreparedDataCommands
    arguments: ['@prepared_data.provider_manager', '@prepared_data.processor_manager', '@logger.channel.prepared_data', '@state']
  prepared_data.storage:
    class: Drupal\prepared_data\Storage\SqlStorage
    calls:
      - [setDatabase, ['@database']]
      - [setShorthandStorage, ['@prepared_data.shorthand_storage']]
  prepared_data.shorthand_storage:
    class: Drupal\prepared_data\Storage\SqlShorthandStorage
    calls:
      - [setDatabase, ['@database']]
  logger.channel.prepared_data:
      parent: logger.channel_base
      arguments: ['prepared_data']
