services:
  microspid.manager:
    class: Drupal\microspid\Service\SpidPaswManager
    arguments: ['@config.factory']
  microspid.certs.manager:
    class: Drupal\microspid\Service\CertsManager
    arguments: ['@config.factory']
  microspid.drupalauth:
    class: Drupal\microspid\Service\MicrospidDrupalAuth
    arguments: ['@microspid.manager', '@config.factory', '@entity_type.manager', '@logger.channel.microspid', '@externalauth.externalauth', '@current_user']
  microspid.tracking:
    class: Drupal\microspid\Service\TrackingTable
    arguments: ['@config.factory']
  microspid_event_subscriber:
    class: Drupal\microspid\EventSubscriber\SimplesamlSubscriber
    arguments: ['@microspid.manager', '@current_user', '@config.factory', '@logger.channel.microspid']
    tags:
      - {name: event_subscriber}
  microspid_externalauth_event_subscriber:
    class: Drupal\microspid\EventSubscriber\SimplesamlExternalauthSubscriber
    arguments: ['@microspid.manager', '@microspid.drupalauth', '@config.factory', '@logger.channel.microspid']
    tags:
      - {name: event_subscriber}
  logger.channel.microspid:
    parent: logger.channel_base
    arguments: ['microspid']
