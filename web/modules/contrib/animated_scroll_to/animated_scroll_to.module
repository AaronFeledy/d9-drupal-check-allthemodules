<?php

/**
 * Implements hook_preprocess_page().
 */
function animated_scroll_to_preprocess_page(&$variables) {
	// Get the default settings from the module.
	$default_settings = \Drupal::config('animated_scroll_to.settings')->getRawData();

	if (isset($default_settings['on_page_load']) && $default_settings['on_page_load'] === 1) {

		// Attach the correct library for the selected functionality.
		$variables['#attached']['library'][] = 'animated_scroll_to/on_page_load';

		// Attach the default settings to the drupalSettings, so it can be used in the javascript.
		$variables['#attached']['drupalSettings']['animated_scroll_to']['default_settings'] = $default_settings;
	}

	if (isset($default_settings['in_page']) && $default_settings['in_page'] === 1) {

		// Attach the correct library for the selected functionality.
		$variables['#attached']['library'][] = 'animated_scroll_to/in_page';

		// Attach the default settings to the drupalSettings, so it can be used in the javascript.
		$variables['#attached']['drupalSettings']['animated_scroll_to']['default_settings'] = $default_settings;
	}
}