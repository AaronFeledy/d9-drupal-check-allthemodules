<?php

/**
 * @file
 * Contains paragraphs_highlighter.module.
 */

use Drupal\Core\Cache\Cache;
use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function paragraphs_highlighter_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    // Main module help for the paragraphs_highlighter module.
    case 'help.page.paragraphs_highlighter':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Add Paragraphs Highlighter functionality for demo purposes.') . '</p>';
      return $output;

    default:
  }
}

/**
 * Implements hook_preprocess_html().
 */
function paragraphs_highlighter_preprocess_html(&$variables) {
  $admin_context = \Drupal::service('router.admin_context');
  $config = \Drupal::config('paragraphs_highlighter.settings');

  // Attach library if configuration setting is enabled and not admin.
  if ($config->get('enable_highlighter') && !$admin_context->isAdminRoute()) {
    $variables['#attached']['library'][] =  'paragraphs_highlighter/base';
  }
}
