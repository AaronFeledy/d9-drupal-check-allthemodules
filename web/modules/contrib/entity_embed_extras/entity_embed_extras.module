<?php

/**
 * @file
 * Sets up video functionality.
 */

use Drupal\Core\Form\FormStateInterface;
use Drupal\entity_embed_extras\Form\EntityEmbedDialogAlter;
use Drupal\entity_embed_extras\Form\EntityEmbedConfigAlter;

/**
 * Implements hook_form_FORM_ID_alter().
 */
function entity_embed_extras_form_entity_embed_dialog_alter(&$form, FormStateInterface $form_state, $form_id) {
  $container = \Drupal::getContainer();
  $alter = EntityEmbedDialogAlter::create($container);
  $alter->formAlter($form, $form_state);
}

/**
 * Implements hook_form_BASE_FORM_ID_alter().
 */
function entity_embed_extras_form_embed_button_add_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  array_unshift($form['#validate'], 'entity_embed_extras_form_embed_button_edit_form_validate');

  $container = \Drupal::getContainer();
  $alter = EntityEmbedConfigAlter::create($container);
  $alter->formAlter($form, $form_state);
}

/**
 * Implements hook_form_BASE_FORM_ID_alter().
 */
function entity_embed_extras_form_embed_button_edit_form_alter(&$form, FormStateInterface $form_state, $form_id) {
  array_unshift($form['#validate'], 'entity_embed_extras_form_embed_button_edit_form_validate');

  $container = \Drupal::getContainer();
  $alter = EntityEmbedConfigAlter::create($container);
  $alter->formAlter($form, $form_state);
}

/**
 * Implements hook_form_BASE_FORM_ID_alter().
 */
function entity_embed_extras_form_embed_button_edit_form_validate(&$form, FormStateInterface $form_state) {
  $container = \Drupal::getContainer();
  $alter = EntityEmbedConfigAlter::create($container);
  $alter->submitConfigurationForm($form, $form_state);
}
