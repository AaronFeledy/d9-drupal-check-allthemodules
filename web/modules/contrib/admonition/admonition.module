<?php

use Drupal\Core\Url;
use Drupal\Core\Link;
use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_preprocess_html().
 * Load CSS.
 * @param $variables
 */
function admonition_preprocess_html(&$variables) {
  $variables['#attached']['library'][] = 'admonition/admonition';
}

/**
 *  Implements hook_help().
 */
function admonition_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.admonition':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t(
        "The Admonition module helps authors add and edit admonitions in 
        their content. An admonition is advice to a reader. The following admonition types
        are supported:")
        . "<ul>
            <li>" . t('Extra') . "</li>
            <li>" . t('Hint') . "</li>
            <li>" . t('Note') . "</li>
            <li>" . t('Troubleshoot') . "</li>
            <li>" . t('Warning') . "</li>
        </ul>
        <p>"
        . t("For a full description of the module, visit the <a href=':project_link'>project page</a>.",
          array(':project_link' => Url::fromUri('https://drupal.org/project/admonition')->toString()))
        . "</p>
        <h3>Configuration</h3>
        <p>"
        . t("Go to your site's <a href=':admin_link'>Text formats and editors</a> page. Choose a text format to add
        admonitions support to (e.g., Full HTML). Drag the admonition icon
        from the Available buttons onto the Active toolbar.",
          array(':admin_link' => Url::fromRoute('filter.admin_overview')->toString()))
        . '</p>';
      return $output;
  }
}
