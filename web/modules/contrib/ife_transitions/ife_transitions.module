<?php

/**
 * @file
 * Contains Important Hooks for.
 */

/**
 * Implements hook_preprocess_HOOK().
 */
function ife_transitions_preprocess_status_messages(&$variables) {
  // Attach IFE Transitions only when we have Errors on the page.
  if (isset($variables['message_list']['error'])) {
    $variables['#attached']['library'][] = 'ife_transitions/drupal.ife_transitions';

    // Load the Configurations.
    $ife_transitions_settings = \Drupal::config('ife_transitions.settings')->get();

    // Check if back to top is enabled..
    $variables['#attached']['drupalSettings']['ife_transitions_time'] = $ife_transitions_settings['ife_transitions_time'];
    if ($ife_transitions_settings['ife_transitions_back_to_top'] == 1) {
      // Pass these settings, If back-to-top is enabled.
      $variables['#attached']['drupalSettings']['ife_transitions_back_to_top_text'] = $ife_transitions_settings['ife_transitions_back_to_top_text'];
      $variables['#attached']['drupalSettings']['ife_transitions_back_to_top_time'] = $ife_transitions_settings['ife_transitions_back_to_top_time'];
    }
  }
}
