<?php

function ff_title($nid, $type = "", $published = "") {
   /*
     Returns the name of the node provided in $nid
     $nid = Node ID of item to lookup
     $type = If provided, limit search to passed content type (Machine Readable)
     $published = Returns title of nid regardless of publication status. If provided, limit search to 1 Published, or 0 Unpublished

   */

   $s = "SELECT title FROM {node_field_data} WHERE nid=:nid";
   $vars[':nid'] = $nid;

   if ($type != "") {
     $s .= " AND type = ':type'";
     $vars[':type'] = $type;
   }

   if ($published != "") {
     $s .= " AND status = :status";
     $vars[':status'] = $published;
   }

   // do the query
   $r = db_query($s, $vars);
   //return 'timmy';

   foreach ($r as $record) {
      return $record->title;
   }
   return FALSE;
/*
   if (db_affected_rows($r)==1) {
     return db_result($r);
   } else {
     return FALSE;
   }
*/
}

function ff_term($tid, $vid = "") {
  /*
    Returns the term name based on $tid with optional $vid
  */
  $s = "SELECT name FROM {taxonomy_term_data} WHERE tid = :tid";
   $vars[':tid'] = $tid;

  if ($vid != "") {
    $s .= " AND vid = ':vid'";
   $vars[':vid'] = $vid;
  }

  // do the query
  $r = db_query($s, $vars);
   foreach ($r as $record) {
      return $record->name;
   }
   return FALSE;

}

function ff_type($nid) {
  /*
    Returns the value of the 'type' field in the node table for the given nid
  */

  $s = "SELECT type FROM {node_field_data} WHERE nid = :nid LIMIT 1";
  $vars[':nid'] = $nid;
  $r = db_query($s, $vars);
   foreach ($r as $record) {
      return $record->type;
   }
   return FALSE;

}