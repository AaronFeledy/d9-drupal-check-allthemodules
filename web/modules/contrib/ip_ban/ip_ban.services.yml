services:
  ip_ban.manager:
    class: Drupal\ip_ban\IpBanSetBanManager
    tags:
      - { name: backend_overridable }
  ip_ban_event_subscriber:
    class: Drupal\ip_ban\EventSubscriber\IpBanSubscriber
    arguments: ['@ip_ban.manager']    
    tags:
      - {name: event_subscriber}
  ban.middleware:
    class: Drupal\ip_ban\IpBanMiddleware
    arguments: ['@ip_ban.manager']    
    tags:
      # Needs to work when caching is enabled; priority of 10 seems to work. 
      - { name: http_middleware, priority: 10 }
