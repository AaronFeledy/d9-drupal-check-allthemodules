# General settings.
collect.settings:
  type: config_object
  label: Collect settings
  mapping:
    entity_capture:
      type: sequence
      label: Configure continuous entity and entity reference capturing
      sequence:
        type: mapping
        label: Entity type
        mapping:
          continuous:
            label: Continuous entity capture configuration
            type: mapping
            mapping:
              default:
                type: string
                label: Include or exclude selected bundles
              bundles:
                type: sequence
                label: Selected bundles
                sequence:
                  type: string
                  label: An entity bundle
          reference_fields:
            type: sequence
            label: Reference fields
            sequence:
              type: string
              label: Reference field

# Model.
collect.model.*:
  type: config_entity
  label: Model configuration
  mapping:
    id:
      type: string
      label: ID
    label:
      type: label
      label: Label
    uri_pattern:
      type: string
      label: URI pattern
    plugin_id:
      type: string
      label: Model plugin ID
    locked:
      type: boolean
      label: Locked
    container_revision:
      type: boolean
      label: Enable container revisions
    properties:
      type: sequence
      label: Property definitions
      sequence:
        # Keyed by property names.
        type: mapping
        mapping:
          query:
            type: string
            label: Query
            description: The query used to extract the value from the data.
          data_definition:
            type: collect.data_definition.[type]
            label: Data definition
            description: The serialized data definition of the property value.
    processors:
      type: sequence
      label: Post-processors
      sequence:
        type: collect.processor.[plugin_id]
        label: Post-processor

# Property data types.
collect.data_definition.*:
  type: collect.data_definition

collect.data_definition.list:
  type: collect.list_data_definition

collect.data_definition.map:
  type: collect.complex_data_definition

collect.data_definition.field_item:
  type: collect.field_item_data_definition

# Provide default empty schema for processor settings.
collect.processor.*:
  type: collect.processor

# Relations.
collect.relation_type.*:
  type: config_entity
  label: Relation type
  mapping:
    id:
      type: string
      label: ID
    label:
      type: label
      label: Label
    uri_pattern:
      type: string
      label: URI pattern
    plugin_id:
      type: string
      label: Relation plugin ID

# Search API datasource.
"plugin.plugin_configuration.search_api_datasource.collect:*":
  type: mapping
  label: 'Collect datasource configuration'
  mapping:
    default:
      type: string
      label: 'Decides if we want to include or exclude the selected schema config.'
    schemas:
      type: sequence
      label: 'The selected schemas'
      sequence:
        type: string
        label: 'Schema config ID'
