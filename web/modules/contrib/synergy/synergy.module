<?php

use Drupal\Core\Entity\EntityInterface;

/**
 * Implements hook_entity_operation().
 */
function synergy_entity_operation(EntityInterface $entity) {
  $operations = array();
  if ($entity->hasLinkTemplate('drupal:synergy')) {
    $operations['synergy'] = array(
      'title' => t('Synergy'),
      'url' => $entity->urlInfo('drupal:synergy'),
      'weight' => 50,
    );
  }
  return $operations;
}

/**
 * Implements hook_entity_type_alter().
 */
function synergy_entity_type_alter(array &$entity_types) {
  foreach ($entity_types as $entity_id => $entity_type) {
    if (strpos($entity_id, 'cms_') === 0 && $entity_type->hasLinkTemplate('canonical')) {
      // Provide default route names for the translation paths.
      if (!$entity_type->hasLinkTemplate('drupal:synergy')) {
        $path = $entity_type->getLinkTemplate('canonical') . '/synergy';
        $entity_type->setLinkTemplate('drupal:synergy', $path);
      }
    }
  }
}
