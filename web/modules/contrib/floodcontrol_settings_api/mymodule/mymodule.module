<?php

/**
 * @file
 * Contains mymodule.module.
 */
use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function mymodule_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
// Main module help for the mymodule module.
    case 'help.page.mymodule':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('This is an example module which consumes flood control api') . '</p>';
      return $output;

    default:
  }
}

/**
 * Implements hook_floodcontrol_settings().
 */
function mymodule_floodcontrol_settings($form) {

  $form['mycustomform1'] = [
    '#type' => 'fieldset',
    '#title' => t('Settings for mycustomform1 based forms'),
    '#collapsible' => TRUE,
    '#collapsed' => FALSE,
  ];
  $form['mycustomform1']['mycustomform1_threshold'] = [
    '#type' => 'textfield',
    '#title' => t('Threshold (The maximum number of times each user can do this event per time window)'),
    '#default_value' => \Drupal::config('floodcontrol_settings_api.settings')->get('mycustomform1_threshold'),
    '#size' => 10,
  ];
  $form['mycustomform1']['mycustomform1_window'] = [
    '#type' => 'textfield',
    '#title' => t('Window (Number of seconds in the time window for this event (default is 3600 seconds, or 1 hour))'),
    '#default_value' => \Drupal::config('floodcontrol_settings_api.settings')->get('mycustomform1_window'),
    '#size' => 10,
  ];
  $form['mycustomform2'] = [
    '#type' => 'fieldset',
    '#title' => t('Settings for mycustomform2 based forms'),
    '#collapsible' => TRUE,
    '#collapsed' => FALSE,
  ];
  $form['mycustomform2']['mycustomform2_threshold'] = [
    '#type' => 'textfield',
    '#title' => t('Threshold (The maximum number of times each user can do this event per time window)'),
    '#default_value' => \Drupal::config('floodcontrol_settings_api.settings')->get('mycustomform2_threshold'),
    '#size' => 10,
  ];
  $form['mycustomform2']['mycustomform2_window'] = [
    '#type' => 'textfield',
    '#title' => t('Window (Number of seconds in the time window for this event (default is 3600 seconds, or 1 hour))'),
    '#default_value' => \Drupal::config('floodcontrol_settings_api.settings')->get('mycustomform2_window'),
    '#size' => 10,
  ];

  return $form;
}
