<?php

/**
 * @file
 *  The main functionality of the FreshBooks module.
 *
 * @author Guy Paddock (guy.paddock@redbottledesign.com)
 * @author Xavier L. (xavier@openconcept.ca)
 */
use Freshbooks\FreshBooksApi;

/**
 *  Implements hook_libraries_info().
 */
function freshbooks_libraries_info() {
  $libraries = array();
  $libraries['freshbooks-api'] = array(
    'name' => 'FreshBooks API',
    'vendor url' => 'https://github.com/rtconner/freshbooks-api',
    'download url' => 'https://github.com/rtconner/freshbooks-api/archive/master.zip',
    'version callback' => 'freshbooks_libraries_version_callback',
    'files' => array(
      'php' => array(
        'src/Freshbooks/FreshBooksApi.php',
        'src/Freshbooks/FreshBooksApiException.php',
        'src/Freshbooks/XmlDomConstruct.php',
      ),
    ),
  );
  return $libraries;
}

function freshbooks_libraries_version_callback() {
  return 'dev-master';
}

/**
 * @deprecated
 * @param $method
 * @return FreshBooksApi
 */
function freshbooks_get_new_api_client($method) {
  /** @var FreshBooksApi $api */
  $api = Drupal::service('freshbooks.api');

  $api->setMethod($method);

  return $api;
}
