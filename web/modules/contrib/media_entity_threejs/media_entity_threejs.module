<?php

/**
 * @file
 * Media entity for threejs mesh files.
 */

use Drupal\file\Entity\File;

/**
 * Implements hook_theme().
 */
function media_entity_threejs_theme() {
  return array(
    'media_threejs_file_formatter' => array(
      'variables' => array(
        'file' => NULL,
        'value' => NULL,
      ),
    ),
  );
}

/**
 * Implements template_preprocess_media_threejs_file_formatter().
 */
function media_entity_threejs_preprocess_media_threejs_file_formatter(&$vars) {
  $file = $vars['file'];
  $file_entity = ($file instanceof File) ? $file : File::load($file->fid);
  $url = file_create_url($file_entity->getFileUri());
  $vars['media_link'] = $url;

}
