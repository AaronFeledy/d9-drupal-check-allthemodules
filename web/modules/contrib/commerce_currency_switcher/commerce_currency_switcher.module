<?php

/**
 * Implements hook_entity_build_defaults_alter().
 */
function commerce_currency_switcher_entity_view_alter(array &$build, \Drupal\Core\Entity\EntityInterface $entity, $view_mode) {
  if (array_key_exists('#commerce_product', $build) ||
      array_key_exists('#commerce_product_variation', $build)) {
    // Add our cache context.
    $build['#cache']['contexts'][] = 'multicurrency';
  }
}
