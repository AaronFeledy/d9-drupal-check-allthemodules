<?php

/**
 * @file
 * Install file for the jQCloud library test module.
 */

use Drupal\Core\Site\Settings;

/**
 * Implements hook_install().
 */
function jqcloud_library_test_install() {
  if ($public_path = Settings::get('file_public_path')) {
    $library_folder = $public_path . '/libraries';
  }
  else {
    $library_folder = 'libraries';
  }
  $zip_file = $library_folder . '/jqcloud.zip';
  $jqcloud_folder = $library_folder . '/jqcloud';

  if (file_exists($jqcloud_folder)) {
    return;
  }

  file_prepare_directory(
    $library_folder,
    FILE_MODIFY_PERMISSIONS | FILE_CREATE_DIRECTORY
  );

  copy('https://github.com/mistic100/jQCloud/archive/master.zip', $zip_file);
  $zip = new \ZipArchive();
  $zip->open($zip_file);
  $zip->extractTo($library_folder);

  rename($library_folder . '/jQCloud-master', $jqcloud_folder);
}
