services:
  contentserialize.importer:
    class: Drupal\contentserialize\Importer
    arguments:
      - '@serializer'
      - '@entity_type.manager'
      - '@event_dispatcher'
  contentserialize.exporter:
      class: Drupal\contentserialize\Exporter
      arguments:
        - '@serializer'
  contentserialize.missing_reference.fixer.factory:
    class: Drupal\contentserialize\MissingReferenceFixerFactory
    arguments:
      - '@bulkentity.loader'
  contentserialize.missing_reference.subscriber:
    class: Drupal\contentserialize\EventSubscriber\MissingReferenceSubscriber
    tags:
      - { name: event_subscriber }
    arguments:
      - '@contentserialize.missing_reference.fixer.factory'
  contentserialize.normalizer.content_entity:
    class: Drupal\contentserialize\Normalizer\UuidContentEntityNormalizer
    tags:
      - { name: normalizer, priority: 10 }
    arguments: ['@entity.manager']
  contentserialize.normalizer.entity_reference_normalizer:
    class: Drupal\contentserialize\Normalizer\UuidEntityReferenceFieldItemNormalizer
    tags:
      - { name: normalizer, priority: 105 }
    arguments:
      - '@serializer.entity_resolver.uuid'
      - '@event_dispatcher'
  contentserialize.normalizer.term_entity_normalizer:
    class: Drupal\contentserialize\Normalizer\TermEntityNormalizer
    tags:
      - { name: normalizer, priority: 50 }
    arguments: ['@entity.manager']
  contentserialize.normalizer.menu_link_content_normalizer:
    class: Drupal\contentserialize\Normalizer\MenuLinkContentNormalizer
    tags:
    # The priority must be higher than content_entity above.
      - { name: normalizer, priority: 15 }
    arguments:
      - '@entity.manager'
      - '@event_dispatcher'
  contentserialize.config:
    factory:
      config.factory:get
    arguments:
      - contentserialize.settings
    class:
      Drupal\Core\Config\ImmutableConfig
  contentserialize.cli.options_provider:
    class: Drupal\contentserialize\Commands\ContentSerializeOptionsProvider
    arguments:
      - '@contentserialize.config'
      - '@string_translation'