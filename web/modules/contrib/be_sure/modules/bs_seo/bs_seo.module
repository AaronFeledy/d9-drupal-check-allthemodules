<?php

/**
 * @file
 * Contains bs_seo.module.
 */

module_load_include('inc', 'bs_seo', 'bs_seo.page_structure');
module_load_include('inc', 'bs_seo', 'bs_seo.crawlability');
module_load_include('inc', 'bs_seo', 'bs_seo.user_experience');
module_load_include('inc', 'bs_seo', 'bs_seo.best_practices');

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function bs_seo_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    // Main module help for the bs_seo module.
    case 'help.page.bs_seo':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Be sure about SEO part of your Drupal site') . '</p>';
      return $output;

    default:
  }
}

/**
 * Implements hook_sure_info().
 */
function bs_seo_sure_info() {
  $items['seo'] = [
    'title' => 'SEO',
    'description' => 'Be sure about SEO part of your Drupal site.',
    'elements' => [
      bs_seo_page_structure(),
      bs_seo_crawlability(),
      bs_seo_user_experience(),
      bs_seo_best_practices(),
    ],
  ];

  return $items;
}

/**
 * Describe sure points of page structure.
 */
function bs_seo_page_structure() {
  return [
    'title' => 'Page structure',
    'items' => [
      [
        'ok' => '%module module enabled',
        'nok' => '%module module is not enabled',
        'callback' => 'bs_seo_page_structure_pathauto',
        'args' => [
          '%module' => be_sure_link_from_uri('Pathauto', 'https://www.drupal.org/project/pathauto'),
        ],
      ],
      [
        'ok' => '%module module enabled',
        'nok' => '%module module disabled',
        'callback' => 'bs_seo_page_structure_metatag',
        'args' => [
          '%module' => be_sure_link_from_uri('Metatag', 'https://www.drupal.org/project/metatag'),
        ],
      ],
    ],
  ];
}

/**
 * Describe sure points of crawlability.
 */
function bs_seo_crawlability() {
  return [
    'title' => 'Crawlability',
    'items' => [
      [
        'ok' => '%module module enabled',
        'nok' => '%module module is not enabled',
        'callback' => 'bs_seo_crawlability_xmlsitemap',
        'args' => [
          '%module' => be_sure_link_from_uri('XML Sitemap', 'https://www.drupal.org/project/xmlsitemap'),
        ],
      ],
      [
        'ok' => '%module module enabled',
        'nok' => '%module module is not enabled',
        'callback' => 'bs_seo_crawlability_robotstxt',
        'args' => [
          '%module' => be_sure_link_from_uri('RobotsTxt', 'https://www.drupal.org/project/robotstxt'),
        ],
      ],
    ],
  ];
}

/**
 * Describe sure points of user experience.
 */
function bs_seo_user_experience() {
  return [
    'title' => 'User experience',
    'items' => [
      [
        'ok' => '%module module enabled',
        'nok' => '%module module is not enabled',
        'callback' => 'bs_seo_user_experience_site_map',
        'args' => [
          '%module' => be_sure_link_from_uri('Sitemap', 'https://www.drupal.org/project/sitemap'),
        ],
      ],
      [
        'ok' => '%module module enabled',
        'nok' => '%module module is not enabled',
        'callback' => 'bs_seo_user_experience_scheduler',
        'args' => [
          '%module' => be_sure_link_from_uri('Scheduler', 'https://www.drupal.org/project/scheduler'),
        ],
      ],
      [
        'ok' => '%module module enabled',
        'nok' => '%module module is not enabled',
        'callback' => 'bs_seo_user_experience_redirect',
        'args' => [
          '%module' => be_sure_link_from_uri('Redirect', 'https://www.drupal.org/project/redirect'),
        ],
      ],
    ],
  ];
}

/**
 * Describe sure points of best practices.
 */
function bs_seo_best_practices() {
  return [
    'title' => 'Best practices',
    'items' => [
      [
        'ok' => '%module module enabled',
        'nok' => '%module module not enabled',
        'callback' => 'bs_seo_best_practices_search404',
        'args' => [
          '%module' => be_sure_link_from_uri('Search 404', 'https://www.drupal.org/project/search404'),
        ],
      ],
      [
        'ok' => '%module module configured',
        'nok' => '%module module not configured',
        'callback' => 'bs_seo_best_practices_gag',
        'args' => [
          '%module' => be_sure_link_from_uri('Google Analytics', 'https://www.drupal.org/project/google_analytics'),
        ],
      ],
      [
        'ok' => 'Google Analytics module caching code',
        'nok' => 'Google Analytics module not caching code',
        'callback' => 'bs_seo_best_practices_gag_cache',
      ],
      [
        'ok' => '%module module enabled',
        'nok' => '%module module not enabled',
        'callback' => 'bs_seo_best_practices_site_verify',
        'args' => [
          '%module' => be_sure_link_from_uri('Site Verification', 'https://www.drupal.org/project/site_verify'),
        ],
      ],
    ],
  ];
}
