services:
  logger.channel.widget_block:
    class: Drupal\Core\Logger\LoggerChannel
    factory: 'logger.factory:get'
    arguments:
      - widget_block

  cache.widget_markup:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin }
    factory: cache_factory:get
    arguments: [widget_markup]

  widget_block.lazy_builder:
    class: Drupal\widget_block\WidgetBlockLazyBuilder
    arguments: ['@entity.manager']

  widget_block.backend:
    class: Drupal\widget_block\Backend\WidgetBlockBackend
    arguments: ['@cache.widget_markup', '@http_client', '@logger.channel.widget_block', '@module_handler', '@cache_tags.invalidator']
    tags:
      - { name: backend_overridable }
