<?php

/**
 * Translates the string through GraphQL.
 *
 * @param $text
 * @param null $langcode
 *
 * @return \Drupal\Core\StringTranslation\TranslatableMarkup|\Drupal\locale\SourceString|null
 * @throws \Drupal\Component\Plugin\Exception\PluginException
 */
function graphql_string_translation_translate($text, $langcode = NULL) {
  /** @var Drupal\graphql\Plugin\GraphQL\TypeSystemPluginManager $fieldPluginManager */
  $fieldPluginManager = \Drupal::service('plugin.manager.graphql.field');
  /** @var \Drupal\graphql_string_translation\Plugin\GraphQL\Fields\Translation $translationFieldPlugin */
  $translationFieldPlugin = $fieldPluginManager->createInstance('translation');
  return $translationFieldPlugin->getTranslation($text, $langcode);
}
