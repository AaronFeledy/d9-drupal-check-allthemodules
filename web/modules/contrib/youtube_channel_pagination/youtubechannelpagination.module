<?php

/**
 * @file
 * Contains youtubechannelpagination.module.
 */
use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\vendor\guzzlehttp\guzzle\src\Exception;
use Drupal\Core\Url;

/**
 * Implements hook_page_top().
 */
function youtubechannelpagination_page_top(array &$page_top) {
  $page_top['youtubechannelpagination'] = [
    '#attached' => [
      'library' => [
        'youtubechannelpagination/youtubechannelpagination'
      ]
    ]
  ]; 
}

/*
 * Function to get video from youtube channel
 */
function youtubechannelpaginationvideo() {
    
    $vars = array();
  
  $max_results = 5;
  $youtubechannelpagination_config = \Drupal::config('youtubechannelpagination.settings');
  $vars['youtubechannelpagination_api_key']= $youtubechannelpagination_config->get('youtubechannelpagination_api_key');
  $vars['youtubechannelpagination_id'] = $youtubechannelpagination_config->get('youtubechannelpagination_id');
  $vars['youtubechannelpagination_video_limit'] = $youtubechannelpagination_config->get('youtubechannelpagination_video_limit');
  $vars['youtubechannelpagination_video_grid_for_row'] = $youtubechannelpagination_config->get('youtubechannelpagination_video_grid_for_row');
  
  return $vars;
}

/**
 * Implements hook_theme().
 */

function youtubechannelpagination_theme($existing, $type, $theme, $path) {
  $channel_data = youtubechannelpaginationvideo();
  return array(
    'youtubechannelpagination_block' => array(
      'variables' => array('youtube_content' => $channel_data),
    ),
  );  
}
