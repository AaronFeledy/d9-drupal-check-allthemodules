services:
  # Subscription provider plug-in manager service.
  plugin.manager.aegir_site_subscription_provider:
    class: Drupal\aegir_site_subscriptions\Plugin\SubscriptionProviderManager
    parent: default_plugin_manager

  # Site service.
  aegir_site_subscriptions.site:
    class: Drupal\aegir_site_subscriptions\Services\Site
    arguments: ['@request_stack', '@module_handler', '@aegir_site_subscriptions.hosting.quota_setting', '@aegir_site_subscriptions.hosting.site_verification']
  # Subscription service.
  aegir_site_subscriptions.subscription:
    class: Drupal\aegir_site_subscriptions\Services\Subscription
    arguments: ['@entity_type.manager', '@plugin.manager.aegir_site_subscription_provider', '@config.factory']

  ###########################################################################
  # Hosting back-end listing services.
  ###########################################################################

  # Site profile lister.
  aegir_site_subscriptions.hosting.profile_listing:
    class: Drupal\aegir_site_subscriptions\HostingServiceCalls\ProfileListHostingServiceCall
    arguments: ['@logger.factory', '@http_client', '@config.factory']
  # Site lister.
  aegir_site_subscriptions.hosting.site_listing:
    class: Drupal\aegir_site_subscriptions\HostingServiceCalls\SiteListHostingServiceCall
    arguments: ['@logger.factory', '@http_client', '@config.factory',]

  ###########################################################################
  # Hosting back-end site services.
  ###########################################################################

  # Site installation service.
  aegir_site_subscriptions.hosting.site_installation:
    class: Drupal\aegir_site_subscriptions\HostingServiceCalls\SiteInstallHostingServiceCall
    arguments: ['@logger.factory', '@http_client', '@config.factory', '@request_stack', '@messenger']
  # Site verification service, which updates site configurations.
  aegir_site_subscriptions.hosting.site_verification:
    class: Drupal\aegir_site_subscriptions\HostingServiceCalls\SiteVerifyHostingServiceCall
    arguments: ['@logger.factory', '@http_client', '@config.factory', '@request_stack', '@messenger']
  # Site quota setting service.
  aegir_site_subscriptions.hosting.quota_setting:
    class: Drupal\aegir_site_subscriptions\HostingServiceCalls\SiteQuotaHostingServiceCall
    arguments: ['@logger.factory', '@http_client', '@config.factory', '@request_stack', '@messenger']
  # Site deletion service.
  aegir_site_subscriptions.hosting.site_deletion:
    class: Drupal\aegir_site_subscriptions\HostingServiceCalls\SiteDeleteHostingServiceCall
    arguments: ['@logger.factory', '@http_client', '@config.factory', '@request_stack', '@messenger']
