<?php

/**
 * Implements hook_theme().
 */
function live_person_theme($existing, $type, $theme, $path) {
  return [
    'live_person_js' => [
      'variables' => [
        'account' => '',
      ],
    ],
  ];
}

/**
 * Implements hook_page_attachments().
 */
function live_person_page_attachments(array &$attachments) {
  if (!\Drupal::service('live_person.visibility_check')->checkVisibility()) {
    return;
  }
  $lp_account = \Drupal::config('live_person.settings')->get('account');

  if (!empty($lp_account)) {
    $attachments['#attached']['library'][] = 'live_person/live_person';
    $attachments['#attached']['drupalSettings']['livePerson']['account'] = $lp_account;
  }
}
