services:
  xhprof_sample.run:
    class: Drupal\xhprof_sample\XHProfSample\RunInterface
    factory: Drupal\xhprof_sample\XHProfSample\RunFactory::getRunStore
    arguments: ['@config.factory', '@service_container']

  xhprof_sample.run_file:
    class: Drupal\xhprof_sample\XHProfSample\RunFile

  xhprof_sample.collector:
    class: Drupal\xhprof_sample\XHProfSample\Collector
    arguments: ['@config.factory', '@xhprof_sample.run', '@xhprof_sample.matcher']

  xhprof_sample.matcher:
    class: Drupal\xhprof_sample\RequestMatcher\XHProfSampleRequestMatcher
    arguments: ['@config.factory', '@path.matcher']

  xhprof_sample.xhprof_sample_event_subscriber:
    class: Drupal\xhprof_sample\EventSubscriber\XHProfSampleEventSubscriber
    arguments: ['@config.factory', '@xhprof_sample.collector']
    tags:
      - { name: event_subscriber }
