!function(e,t,i,a,n,r,o){"use strict";function l(l,s){function c(t,i){var a=null!==t.nextElementSibling?t.nextElementSibling:null,r=t.getAttribute("data-media")?n.parse(t.getAttribute("data-media")):{},o=t.getAttribute("href"),l=t.getAttribute("data-thumb")?t.getAttribute("data-thumb"):"",p={};p.el=t,p.w=r.width,p.h=r.height,p.i=i,p.type=r.type,null!==a&&(p.title=a.innerHTML),l&&(p.msrc=l),"image"===r.type?p.src=o:p.html=e.theme("blazyPhotoSwipeMedia",{item:p}),b.push(p)}function u(e){var t=0;return n.forEach(f,function(i,a){if(i===e)return t=a,!1}),t}function d(e){e.preventDefault();var t=e.target;m(u(t.parentNode.getAttribute("href")?t.parentNode:n.closest(t,"[data-photoswipe-trigger]")))}function m(t){t=t>0?t:0,g.index=t,g.clickToCloseNonZoomable=!1,g.galleryUID=l.getAttribute("data-pswp-uid"),g.getThumbBoundsFn=function(e){var t=r.pageYOffset||o.documentElement.scrollTop,i=b[e].el.getBoundingClientRect();return{x:i.left,y:i.top+t,w:i.width}};var n=new i(w,a,b,g);n.listen("beforeChange",function(){e.attachBehaviors(w)}),n.listen("afterChange",function(){if(h(),r.clearTimeout(p),"video"===n.currItem.type){var e=n.currItem.container.querySelector(".media__icon--play");null!==e&&(p=r.setTimeout(function(){e.click()},300))}}),n.listen("pointerDown",function(){w.className+=" pswp--dragging"}),n.listen("pointerUp",function(){w.className.match("pswp--dragging")&&(w.className=w.className.replace(/(\S+)pswp--dragging/,""))}),n.init()}function h(){var e=w.querySelector(".is-playing .media__icon--close");null!==e&&n.trigger(e,"click")}var g=t.photoswipe.options||{},w=o.querySelectorAll(".pswp")[0],f=l.querySelectorAll("[data-photoswipe-trigger]"),b=[];n.forEach(f,c,l),l.setAttribute("data-pswp-uid",s+1),n.on(w,"click",".pswp__button",h),n.on(l,"click","[data-photoswipe-trigger]",d);var y=function(){var e=r.location.hash.substring(1),t={};if(e.length<5)return t;for(var i=e.split("&"),a=0;a<i.length;a++)if(i[a]){var n=i[a].split("=");n.length<2||(t[n[0]]=n[1])}return t.hasOwnProperty("pid")?(t.pid=parseInt(t.pid,10),t):t}();y.pid>0&&!w.className.match("pswp--open")&&m(y.pid-1),l.className+=" photoswipe--on"}var p;e.theme.blazyPhotoSwipeMedia=function(t){var i,a=t.item,n=a.el,r=n.querySelector("img"),o=null!==r?r.getAttribute("alt"):"",l=Math.round(a.h/a.w*100,2),p=n.getAttribute("data-box-url"),s=n.getAttribute("href"),c="video"===a.type?" media--player":"";return i='<div class="pswp__item--html media-wrapper" style="width:'+a.w+'px">',i+='<div class="media media--pswp media--switch'+c+' media--ratio media--ratio--fluid" style="padding-bottom: '+l+'%">',"video"===a.type&&(i+='<img src="'+p+'" class="media__image media__element pswp__img" alt="'+e.t(o)+'"/>',i+='<span class="media__icon media__icon--close"></span>',i+='<span class="media__icon media__icon--play" data-url="'+s+'" data-autoplay="'+s+'"></span>'),i+='<iframe src="about:blank" data-src="'+s+'" width="'+a.w+'" height="'+a.h+'" class="b-lazy media__iframe media__element" allowfullscreen></iframe>',i+="</div></div>"},e.behaviors.blazyPhotoSwipe={attach:function(e){var i=o.querySelector(".pswp");t.photoswipe.hasOwnProperty("container")&&null===i&&o.body.insertAdjacentHTML("beforeend",t.photoswipe.container);var a=e.querySelectorAll("[data-photoswipe-gallery]:not(.photoswipe--on)");n.once(n.forEach(a,l,e))}}}(Drupal,drupalSettings,PhotoSwipe,PhotoSwipeUI_Default,dBlazy,this,this.document);
