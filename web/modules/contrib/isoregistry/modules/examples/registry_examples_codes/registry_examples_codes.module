<?php
use Drupal\node\Entity\Node;
function registry_examples_codes_install() {
  $ids = \Drupal::entityQuery('taxonomy_term')
    ->condition('vid', 'namespaces') 
    ->condition('field_namespace', 'ex')  // Once we have our conditions specified we use the execute() method to run the query
    ->execute();
  
  $namespace = null;
  foreach ($ids as $key => $value) {
    $namespace = $value;
  }
  
  $level0 = Node::create([
    'langcode' => 'en',
    'type' => 'inspirecodes',
    'title' => 'Level 0',
    'field_codes_definition' => 'Example for the highest level 0',
    'field_namespace' => $namespace,
    'field_codes_code' => 'Level0',
  ]);
  $level0->save();
  
  $level0_de = $level0->addTranslation('de');
  $level0_de->title = 'Ebene 0';
  $level0_de->field_codes_definition = 'Beispiel für die oberste Ebene 0';
  $level0_de->save();
  
  $level1 = Node::create([
    'langcode' => 'en',
    'type' => 'inspirecodes',
    'title' => 'Level 1',
    'field_codes_definition' => 'Example for level 0.1',
    'field_codes_parent' => $level0->id(),
    'field_namespace' => $namespace,
    'field_codes_code' => 'Level0.Level1',
  ]);
  $level1->save();
  
  $level1_de = $level1->addTranslation('de');
  $level1_de->title = 'Ebene 1';
  $level1_de->field_codes_definition = 'Beispiel für die Ebene 0.1';
  $level1_de->save();
    
  $level2 = Node::create([
    'langcode' => 'en',
    'type' => 'inspirecodes',
    'title' => 'Level 2',
    'field_codes_definition' => 'Example for level 0.1.2',
    'field_codes_parent' => $level1->id(),
    'field_namespace' => $namespace,
    'field_codes_code' => 'Level1.Level2',
  ]);
  $level2->save();
  
  $level2_de = $level2->addTranslation('de');
  $level2_de->title = 'Ebene 2';
  $level2_de->field_codes_definition = 'Beispiel für die oberste Ebene 0.1.2';
  $level2_de->save();
}

function registry_examples_codes_uninstall() {
   
}

