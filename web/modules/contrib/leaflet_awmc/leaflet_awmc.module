<?php

/**
 * @file
 * Leaflet AWMC adds support for the Ancient World Mapping Centre tiles.
 */

/**
 * Implements hook_leaflet_map_info().
 */
function leaflet_awmc_leaflet_map_info() {

  $default_settings = [
    'attributionControl' => TRUE,
    'closePopupOnClick'  => TRUE,
    'doubleClickZoom'    => TRUE,
    'dragging'           => TRUE,
    'fadeAnimation'      => TRUE,
    'layerControl'       => FALSE,
    'maxZoom'            => 18,
    'minZoom'            => 0,
    'scrollWheelZoom'    => TRUE,
    'touchZoom'          => TRUE,
    'trackResize'        => TRUE,
    'zoomAnimation'      => TRUE,
    'zoomControl'        => TRUE,
  ];

  $map_info = [];

  $attr_awmc = 'Tiles &copy; <a href="http://mapbox.com">MapBox</a>. Data &copy; <a href="http://openstreetap.org">OpenStreetMap</a> and contributors | Tiles and Data &copy; 2013 <a href="http://awmc.unc.edu">AWMC</a> <a href="https://creativecommons.org/licenses/by-nc/3.0">CC-BY-NC 3.0</a>';

  $layers = [
    'isawnyu.map-knmctlkh' => 'Base map',
    'isawnyu.eoupu8fr' => 'Coast outline',
    'isawnyu.awmc-roads' => 'Roads',
    'isawnyu.s5l5l8fr' => 'Benthos water',
    'isawnyu.awmc-inland-water' => 'Inland water',
    'isawnyu.9e3lerk9' => 'River polygons',
    'isawnyu.awmc-water-courses' => 'Water course center lines',
    'isawnyu.h0rdaemi' => 'Base open water polygons',
    'isawnyu.yyuba9k9' => 'Archaic water',
    'isawnyu.l5xc4n29' => 'Classical water',
    'isawnyu.gq0ssjor' => 'Hellenistic water',
    'isawnyu.ymnrvn29' => 'Roman water',
    'isawnyu.t12it3xr' => 'Late Antiquity water',
  ];

  foreach ($layers as $code => $description) {
    $map_info["mapbox-$code"] = [
      'label' => "AWMC {$description}",
      'description' => "AWMC {$description}",
      'settings' => ['maxZoom' => 17] + $default_settings,
      'layers' => [
        'layer' => [
          'urlTemplate' => "//{s}.tiles.mapbox.com/v3/$code/{z}/{x}/{y}.png",
          'options' => ['attribution' => $attr_awmc],
        ],
      ],
    ];
  }

  return $map_info;
}
