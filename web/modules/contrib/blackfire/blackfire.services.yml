services:
  blackfire.subscriber:
    class: Drupal\blackfire\EventSubscriber\BlackfireSubscriber
    arguments: ['@database', '@logger.channel.blackfire', '@config.factory', '@cache_tags.invalidator', '@entity_type.manager']
    tags:
      - { name: event_subscriber }
  blackfire.page_cache_request_policy.deny_blackfire:
    class: Drupal\blackfire\PageCache\DenyBlackfire
    arguments: ['@config.factory']
    public: false
    tags:
      - { name: page_cache_request_policy }
      - { name: dynamic_page_cache_request_policy }
  logger.channel.blackfire:
    parent: logger.channel_base
    arguments: ['blackfire']
