<?php

/**
 * @file
 * Contains googledrive_doc_viewer.module.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function googledrive_doc_viewer_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    // Main module help for the googledrive_doc_viewer module.
    case 'help.page.googledrive_doc_viewer':
      $helptext = '<p>';
      $helptext .= t('This module provides a new format for the Text field type.'.
      ' This format presents set iframe tag and load full content of the docs in google drive on your side' .
      ' i.e. it displays the contents of the text as appropriate to its field' .
      ' (Adobe Acrobat .pdf, Microsoft Word .doc/.docx, Micrososft Excel .xls/.xlsx, Microsoft Powerpoint .ppt/.pptx),' .
      ' using the Google Docs embedded rendering engine.</p>' . 
      '<p>N.B.: Only get field id in your google drive then paste in to the your text field' . 
      ' Google Docs must be able to access the file in order to ' .
      ' render and display it. In other words, it won\'t work on' . 
      ' a typical development laptop, or if your server is behind' .
      ' a firewall where Google is unable to access it.');
      $helptext .= '</p>';
      $helptext .= '<p>';
      $helptext .= t('To use this field format, add a Text field to a new or existing content type (such as Basic Page) on the content type\'s Manage Fields form.' .
      ' The Text field type provides only one widget type - Text - so select that. On the content type\'s "Manage Display" form,' .
      ' there will be a drop-down select list of available display formats for the Text field. To display the docs within the embedded' .
      ' Google Drive Docs viewer, choose the \'Google Drive Docs Viewer\' format.');
      $helptext .= '</p>';
      $helptext .= '<p>';
      $helptext .= t('Usage: <br /> - Add file docs to your google drive.<br />- Get file id (0B4qAsjeO6V_8Y09hbWlkS2FKN0k) or get file share url'. 
      ' (https://drive.google.com/open?id=0B4qAsjeO6V_8Y09hbWlkS2FKN0k) then add to the text field.');
      $helptext .= '</p>';
      $helptext .= '<p>';
      $helptext .= t('The document viewer may be styled using the CSS selector \'.google-drive-doc-viewer\'. By default, the viewer\'s width is 100% and its height is 800px.');
      $helptext .= '</p>';
      return $helptext;

    default:
  }
}

/**
 * Implements hook_theme().
 */
function googledrive_doc_viewer_theme() {
  return [
    'googledrive_doc_viewer' => [
      'render element' => 'children',
      'variables'=>['googleId'=>Null]
    ],
  ];
}
