lightspeed_ecom.settings:
    path: '/admin/config/services/lightspeed-ecom'
    defaults:
      _controller: '\Drupal\system\Controller\SystemController::systemAdminMenuBlockPage'
      _title: 'Lightspeed eCom'
    requirements:
      _permission: 'access administration pages'

lightspeed_ecom.webhook_receive:
  path: '/lightspeed_ecom/webhook/{shop}'
  defaults:
    _controller: '\Drupal\lightspeed_ecom\Controller\WebhookController::receive'
  requirements:
    _method: "POST"
    _content_type_format: 'json'
    _webhook_access_check: 'TRUE'
    # Remove the line above and uncomment the one below when https://www.drupal.org/node/2786941 is fixed.
    #_custom_access:  '\Drupal\lightspeed_ecom\Controller\WebhookController::access'
  options:
    parameters:
      shop:
        type: 'entity:lightspeed_ecom_shop'

lightspeed_ecom.settings.webhooks_list:
  path: '/admin/config/services/lightspeed-ecom/webhooks/{shop}'
  defaults:
    _controller: '\Drupal\lightspeed_ecom\Controller\WebhookAdminController::index'
    _title_callback: '\Drupal\lightspeed_ecom\Controller\WebhookAdminController::indexTitle'
    _title: 'index'
    shop: 'default'
  requirements:
    _permission: 'administer lightspeed ecom shops'
  options:
    parameters:
      shop:
        type: 'entity:lightspeed_ecom_shop'

lightspeed_ecom.settings.webhooks_synchronize:
  path: '/admin/config/services/lightspeed-ecom/webhooks/{shop}/synchronize'
  defaults:
    _controller: '\Drupal\lightspeed_ecom\Controller\WebhookAdminController::synchronize'
    _title: 'Synchronize'
  requirements:
    _permission: 'administer lightspeed ecom shops'
  options:
    parameters:
      shop:
        type: 'entity:lightspeed_ecom_shop'
