<?php

/**
 * @file
 * Contains webform_epetition.module.
 */

use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Form\FormStateInterface;

/**
 * Implements hook_help().
 *
 * @param $route_name
 * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
 *
 * @return string
 */
function webform_epetition_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    // Main module help for the webform_epetition module.
    case 'help.page.webform_epetition':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Plugin elements that use the theyworkforyou API') . '</p>';
      return $output;

    default:
  }
}


/**
 * Implements hook_webform_element_alter().
 *
 * @param array              $element
 * @param FormStateInterface $form_state
 * @param array              $context
 */
function webform_epetition_webform_element_alter(array &$element, FormStateInterface $form_state, array $context) {
  // check for desired element
  if ($element['#type'] === 'webform_epetition_search') {
    $element['#element_validate'][] = array(
      'Drupal\webform_epetition\Validate\WebformEpetitionValidate',
      'validate'
    );
  }
}
