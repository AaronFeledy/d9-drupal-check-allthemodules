<?php

/**
 * @file
 * Install, update and uninstall hooks for this module.
 */

/**
 * Implements hook_install().
 */
function role_test_accounts_install() {
  \Drupal::service('role_test_accounts.manager')->generateRoleTestAccounts();
}

/**
 * Implements hook_uninstall().
 */
function role_test_accounts_uninstall() {
  /** @var \Drupal\user\UserInterface[] $users */
  $users = \Drupal::service('role_test_accounts.manager')->getAllRoleTestAccounts();
  foreach ($users as $user) {
    $user->delete();
  }
}

/**
 * Set default values for role_test_accounts.settings.
 */
function role_test_accounts_update_8101() {
  $config = \Drupal::configFactory()->getEditable('role_test_accounts.settings');
  $config
    ->set('selection_method', 'exclude')
    ->set('selected_roles', [])
    ->save(TRUE);
}

/**
 * Set a default password for Role Test Accounts.
 */
function role_test_accounts_update_8102() {
  $config = \Drupal::configFactory()->getEditable('role_test_accounts.settings');
  $config->set('password', 'Test1234!')->save(TRUE);
}
