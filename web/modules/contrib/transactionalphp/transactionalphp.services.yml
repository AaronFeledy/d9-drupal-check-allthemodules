services:

  transactionalphp.factory:
    class: Drupal\transactionalphp\TransactionalPhpFactory
    calls:
      - [setContainer, ['@service_container']]

  transactionalphp:
    class: Drupal\transactionalphp\TransactionalPhp
    factory: transactionalphp.factory:get
    arguments: ['@database.lazy']

  database.lazy:
    class: Drupal\transactionalphp\DatabaseLazyConnection
    arguments: [default]
