entity.dialog.add_form:
  path: '/dialog/new/{recipient}'
  defaults:
    _entity_form: dialog.add
    _title: 'Start new dialog'
  options:
    _admin_route: false
    parameters:
      recipient:
        type: entity:user
  requirements:
    _entity_create_access: 'dialog'
    _user_is_logged_in: 'TRUE'
    recipient: '\d+'
    _custom_access:  'Drupal\private_messages\Form\Dialog\DialogForm::access'

entity.dialog.canonical:
  path: '/dialog/{dialog}'
  options:
    _admin_route: false
  defaults:
    _entity_view: 'dialog'
  requirements:
    _entity_access: 'dialog.view'
    _user_is_logged_in: 'TRUE'
    user: '\d+'

private_messages.dialog.all:
  path: '/user/{user}/dialogs'
  defaults:
    _controller: '\Drupal\private_messages\Controller\DialogController::all'
    _title: 'Messages'
  options:
    _admin_route: false
    parameters:
      user:
        type: entity:user
  requirements:
    _permission: 'use private messages'
    _user_is_logged_in: 'TRUE'
    _private_messages_access_check: 'TRUE'
    user: '\d+'

private_messages.dialog.inbox:
  path: '/user/{user}/dialogs/inbox'
  defaults:
    _controller: '\Drupal\private_messages\Controller\DialogController::inbox'
    _title: 'Inbox'
  options:
    _admin_route: false
    parameters:
      user:
        type: entity:user
  requirements:
    _permission: 'use private messages'
    _user_is_logged_in: 'TRUE'
    _private_messages_access_check: 'TRUE'
    user: '\d+'

private_messages.dialog.sent:
  path: '/user/{user}/dialogs/sent'
  defaults:
    _controller: '\Drupal\private_messages\Controller\DialogController::sent'
    _title: 'Sent'
  options:
    _admin_route: false
    parameters:
      user:
        type: entity:user
  requirements:
    _permission: 'use private messages'
    _user_is_logged_in: 'TRUE'
    _private_messages_access_check: 'TRUE'
    user: '\d+'

private_messages.blocked:
  path: '/user/{user}/blocked'
  defaults:
    _controller: '\Drupal\private_messages\Controller\DialogController::blocked'
    _title: 'Blocked users'
  options:
    _admin_route: false
    parameters:
      user:
        type: entity:user
  requirements:
    _permission: 'use private messages'
    _user_is_logged_in: 'TRUE'
    _private_messages_access_check: 'TRUE'
    user: '\d+'
