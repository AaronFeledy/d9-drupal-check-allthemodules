<?php

/**
 * @file
 * Adds a jump menu to the toolbar that allows administrators to view the current page's entity and to quickly go to different a entity.
 */

/**
 * Implements hook_toolbar().
 */
function entity_jump_menu_toolbar() {
  if (!\Drupal::currentUser()->hasPermission('access entity jump menu toolbar')) {
    return [];
  }

  $items = [];

  $form = \Drupal::formBuilder()->getForm('Drupal\entity_jump_menu\Form\EntityJumpMenuForm');
  $items['entity_jump_menu'] = [
    '#type' => 'toolbar_item',
    'tab' => [
      'form' => $form,
    ],
    '#wrapper_attributes' => [
      'class' => ['entity-jump-menu-toolbar-tab'],
    ],
    '#attached' => [
      'library' => ['entity_jump_menu/entity_jump_menu.toolbar'],
    ],
  ];

  return $items;
}
