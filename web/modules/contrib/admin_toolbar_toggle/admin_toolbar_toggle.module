<?php

/**
 * @file
 * Various hooks required for Admin Toolbar Toggle functionality.
 */

/**
 * Implements hook_element_info_alter().
 */
function admin_toolbar_toggle_element_info_alter(&$info) {
  if (isset($info['toolbar'])) {
    $info['toolbar']['#attached']['library'][] = 'admin_toolbar_toggle/admin_toolbar_toggle';
    $info['toolbar']['#pre_render'][] = '_admin_toolbar_toggle_pre_render_toolbar';
  }
}

/**
 * Implements hook_preprocess().
 */
function _admin_toolbar_toggle_pre_render_toolbar($element) {
  $config = \Drupal::config('admin_toolbar_toggle.settings');
  $element['#attached']['drupalSettings']['admin_toolbar_toggle'] = ['key' => $config->get('key')];

  return $element;
}
