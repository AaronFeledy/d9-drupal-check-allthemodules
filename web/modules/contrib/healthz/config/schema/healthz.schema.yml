# Schema for configuration of the Healthz module.

healthz_check:
  type: mapping
  label: 'Healthz Check'
  mapping:
    id:
      type: string
      label: 'ID'
    provider:
      type: string
      label: 'Provider'
    status:
      type: boolean
      label: 'Status'
    weight:
      type: integer
      label: 'Weight'
    failure_status_code:
      type: integer
      label: 'Failure status code'
    settings:
      type: healthz_check_settings.[%parent.id]

# Default for plugins without any schema.
healthz_check_settings.*:
  type: mapping
  label: 'Healthz settings'

# SAPI SOLR plugin.
healthz_check_settings.sapi_solr:
  type: mapping
  mapping:
    search_api_server:
      type: string
      label: 'Search API server'

# Last cron run plugin.
healthz_check_settings.last_cron_run:
  type: mapping
  mapping:
    failure_threshold:
      type: integer
      label: 'Failure threshold'

healthz.settings:
  type: config_object
  label: 'Healthz Settings'
  mapping:
    checks:
      type: sequence
      label: 'Enabled checks'
      sequence:
        type: healthz_check
