<?php

/**
 * @file
 * Area Print module-file.
 */

/**
 * Implements hook_form().
 * 
 * @param array $options
 *   An associative array containing:
 *     (optional) target_id: Id of the element you want to print,
 *     (optional) button_id: Id that will be given to the print link or button,
 *     (optional) value: The text for the link/button, eg. t('Print'),
 *     (optional) type:  either 'link' or 'button',
 *     (optional) custom_css: path to a css file that will get added to the page before printing, eg. drupal_get_path('module','my_module').'/css/print.css'
 *
 * @return array
 *   Returns the renderable array for the print button/link.
 */
function area_print($options = [], $render = TRUE) {
  //add the defaults
  $options += [
    'button_id' => 'area-print-action',
    'css_id' => 'content',
    'action_label' => t('Print'),
    'type' => 'button',
    'custom_css' => 'none',
  ];
  
  $build['#attached']['library'][] = 'area_print/area_print_js';
  $build['#attached']['drupalSettings']['area_print'] = [
    'button_id'  => $options['button_id'],
    'target_id'  => $options['css_id'], 
    'custom_css' => $options['custom_css'],
  ];
  
  $build['action'] = [
    '#id' => $options['button_id'],
    '#type' => $options['type']
  ];
 
  if ($options['type'] == 'button') {
    $build['action']['#value'] = $options['action_label'];
  }
  else {
    $build['action']['#title'] = $options['action_label'];
    $build['action']['#url'] = \Drupal\Core\Url::fromUserInput('/');
  }
  return $build;
}




