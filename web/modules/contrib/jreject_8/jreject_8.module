<?php

function jreject_8_page_attachments_alter(&$page)
{
  $config = \Drupal::config('jreject.settings');

  if ($config->get('jreject_enable')) {
    $rejects = \Drupal\jreject\Form\JRejectBrowsersSettings::getRejects();
    $opts = \Drupal\jreject\Form\JRejectOptionsSettings::getOptions();
    $opts += \Drupal\jreject\Form\JRejectSettings::getOptions();
    $browserAlternatives = \Drupal\jreject\Form\JRejectAlternativesSettings::getAlternativesBrowers();

    $page['#attached']['library'][] = 'jreject/jquery.jreject';
    $page['#attached']['library'][] = 'jreject/jreject';
    $page['#attached']['drupalSettings']['jreject']['rejects'] = $rejects;
    $page['#attached']['drupalSettings']['jreject']['opts'] = $opts;
    $page['#attached']['drupalSettings']['jreject']['browserAlternatives'] = $browserAlternatives;
  }
}