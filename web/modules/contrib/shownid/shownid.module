<?php 

use Drupal\shownid\Plugin\Block\ShownidBlock;

/**
 * Implements hook_toolbar().
 */
function shownid_toolbar() {
  // Check whether toolbar integration is enabled.
  if (\Drupal::config('shownid.settings')->get('toolbar_integration')) {
    $items = array(
      'shownid' => array(
        '#type' => 'toolbar_item',
        'tab' => array(
          '#markup' => '<a href="#" class="toolbar-item dummy-link">' . ShownidBlock::getIdString() . '</a>',
          '#cache' => array(
            'contexts' => array(
              'route',
            ),
          ),
        ),
        '#weight' => Drupal::config('shownid.settings')->get('toolbar_weight'),
      ),
    );
    return $items;
  }
}