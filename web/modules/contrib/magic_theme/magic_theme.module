<?php

use Drupal\magic_theme\HunterControlHandler;

/**
 * Implements hook_theme().
 */
function magic_theme_theme() {
  return array(
    'hunter' => array(
      'render element' => 'vars',
    ),
  );
}

/**
 * Implements hook_cache_flush().
 */
function magic_theme_cache_flush() {
  if(file_exists(\Drupal::root() . '/themes/engines/hunter_engine/hunter_engine.engine')){
    require_once \Drupal::root() . '/themes/engines/hunter_engine/hunter_engine.engine';
  }else{
    drupal_set_message('You hunter engine clear cache failed, maybe your engine path is error. please make sure place at: /themes/engines/', 'warning');
  }
  
  try {
    if (function_exists('hunter_engine_clear_cache')) {
      hunter_engine_clear_cache();
    }
  } catch (Exception $e) {
    watchdog_exception('hunter engine clear cache failed', $e);
  }
}

/**
 * return render page.
 */
function view($name, array $vars = array()) {
  $handle = new HunterControlHandler();
  return $handle->setTemplate('hunter__'.$name)->setVariables($vars)->render();
}
