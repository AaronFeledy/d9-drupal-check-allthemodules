<?php

/**
 * Find entities by a field.
 *
 * @param string $entity_type
 *   Entity type (I.E node).
 * @param array $fields
 *   Array of field conditions.
 *
 * @return mixed
 */
function eqd_find_by($entity_type, $fields) {
 return \Drupal::service('eqd')
    ->getStorage($entity_type)
    ->findBy($fields)
    ->load();
}

/**
 * Find entities by a field and get specific values.
 *
 * @param string $entity_type
 *   Entity type (I.E node).
 * @param array $fields
 *   Array of field conditions.
 * @param array $values
 *   Array of values to retrieve.
 *
 * @return mixed
 */
function eqd_find_by_get_values($entity_type, $fields, $values) {
  return \Drupal::service('eqd')
    ->getStorage($entity_type)
    ->findBy($fields)
    ->getValues($values);
}

/**
 * Find entities by and load them as an array.
 *
 * @param string $entity_type
 *   Entity type (I.E node).
 * @param array $fields
 *   Array of field conditions.
 *
 * @return mixed
 */
function eqd_find_by_get_entities_array($entity_type, $fields) {
  return \Drupal::service('eqd')
    ->getStorage($entity_type)
    ->findBy($fields)
    ->getEntitiesArray();
}