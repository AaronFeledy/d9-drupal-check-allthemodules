<?php

/**
 * @file
 * Provides accessibility development tools.
 */


 /**
 * Implements hook_page_attachments().
 *
 * Dynamically attaches devel_a11y's overrides depending on its configuration.
 */
function devel_a11y_page_attachments(array &$attachments) {
  $attachments['#cache']['contexts'][] = 'user.permissions';
  if (!\Drupal::currentUser()->hasPermission('access devel information')) {
    return;
  }

  $config = \Drupal::config('devel_a11y.settings');
  if ($config->get('aural.announce.log')) {
    $attachments['#attached']['library'][] = 'devel_a11y/announce.log';
  }
  if ($config->get('keyboard.tabbingmanager.log')) {
    $attachments['#attached']['library'][] = 'devel_a11y/tabbingmanager.log';
  }
  if ($config->get('keyboard.tabbingmanager.visualize')) {
    $attachments['#attached']['library'][] = 'devel_a11y/tabbingmanager.visualize';
  }
}
