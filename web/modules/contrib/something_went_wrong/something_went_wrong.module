<?php

use Drupal\Core\Mail\MailFormatHelper;

/**
 * Implements hook_mail().
 */
function something_went_wrong_mail($key, &$message, $params) {
  switch ($key) {
    case 'sww_error_mail':
      $body = $params['message'];

      $label = \Drupal::config('something_went_wrong.settings')->get('label');
      $message['subject'] = t('Something went wrong @ @label', ['@label' => $label]);
      $message['body'][] = MailFormatHelper::htmlToText($body);
      break;
  }
}
