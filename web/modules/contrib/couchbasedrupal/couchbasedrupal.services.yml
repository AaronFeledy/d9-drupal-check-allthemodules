services:
  logger.channel.couchbase:
    parent: logger.channel_base
    arguments: ['form']
  couchbasedrupal.manager:
    class: Drupal\couchbasedrupal\CouchbaseManager
    arguments: ['@settings', '@app.root', '@site.path', ]
  cache.backend.couchbase:
    class: Drupal\couchbasedrupal\Cache\CouchbaseBackendFactory
    arguments: ['@couchbasedrupal.manager', '@cache_tags.invalidator.checksum']
  cache.rawbackend.couchbase:
    class: Drupal\couchbasedrupal\Cache\CouchbaseRawBackendFactory
    arguments: ['@couchbasedrupal.manager']
  cache_tags.invalidator.checksum.couchbase:
    class: Drupal\couchbasedrupal\Cache\CouchbaseTagsChecksum
    tags:
    - {name: cache_tags_invalidator}
    arguments: ['@couchbasedrupal.manager']
  lock.couchbase:
    class: Drupal\couchbasedrupal\Lock\CouchbaseLockBackend
    lazy: true
    arguments: ['@cache.rawbackend.couchbase']
  lock.persistent.couchbase:
    class: Drupal\couchbasedrupal\Lock\PersistentCouchbaseLockBackend
    arguments: ['@cache.rawbackend.couchbase']
    lazy: true
  cache.couchbase:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
    - {name: cache.bin, default_backend: cache.backend.wincache}
    factory: cache_factory:get
    arguments: [data]
  keyvalue.chained.couchbase:
    class: Drupal\supercache\KeyValueStore\KeyValueChainedFactory
    arguments: ['@cache.backend.couchbase', '@serialization.phpserialize', '@database']
  flood.couchbase:
    class: Drupal\couchbasedrupal\Flood\CouchbaseBackend
    arguments: ['@couchbasedrupal.manager', '@request_stack']

