<?php

/**
 * @file
 * Provides integration between Users and Omeda Customers.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function omeda_customers_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.omeda_customers':
      return '<p>' . t('The Omeda Customers module extends the Omeda base module to allow syncing of Drupal user data with Omeda using the Store Customer and Order API. You can map user fields to your Omeda customer entities and sync them on user updates. You can choose which roles will sync and which user fields will sync.') . '</p>';
  }
}

/**
 * Implements hook_ENTITY_TYPE_insert().
 */
function omeda_customers_user_insert($user) {
  \Drupal::service('omeda_customers.synchronizer')->syncUserToOmeda($user);
}

/**
 * Implements hook_ENTITY_TYPE_update().
 */
function omeda_customers_user_update($user) {
  \Drupal::service('omeda_customers.synchronizer')->syncUserToOmeda($user);
}
