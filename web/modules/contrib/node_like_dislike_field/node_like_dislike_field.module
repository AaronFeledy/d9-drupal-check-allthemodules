<?php

/**
 * @file
 * Contains hooks of node_like_dislike_field.
 */

use Drupal\Component\Utility\Html;
use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_theme() for like-dislike.html.twig.
 */
function node_like_dislike_field_theme() {

  return [
    'like_dislike' => [
      'variables' => [
        'likes' => NULL,
        'dislikes' => NULL,
        'likes_url' => NULL,
        'dislikes_url' => NULL,
        'report_abuse_url' => NULL,
      ],
    ],
    'contact-mail-body' => [
      'variables' => [
        'entity_id' => NULL,
        'label'  => NULL,
      ],
    ],
  ];
}

/**
 * Implements hook_mail() for mailing configuration.
 */
function node_like_dislike_field_mail($key, &$message, $params) {

  $options = [
    'langcode' => $message['langcode'],
  ];
  switch ($key) {
    case 'report_abuse':
      $message['from'] = \Drupal::config('system.site')->get('mail');
      $message['subject'] = t('@title', ['@title' => $params['title']], $options);
      $message['body'][] = Html::escape($params['message']);
      break;
  }
}

/**
 * Implements hook_help().
 */
function node_like_dislike_field_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.node_like_dislike_field':
      return t('<p>The Node Like/Dislike Field module is a fully customizable module which allows
visitors to like, dislike and report abuse about the node anonymously. This
module defines a field type that can be added to any content type. This field
integrates the statistical graphs into the node edit page which allows the
administrator to have knowledge about the total number of likes and dislikes
and users statistics according to selected date in 1 to 15 days.</p>
      <p>See the <a href=":project_page">project page on Drupal.org</a> for more details.</p>',
        [
          ':project_page' => 'https://www.drupal.org/project/node_like_dislike_field',
        ]);
  }
}
