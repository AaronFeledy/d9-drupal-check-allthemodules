<?php

/**
 * @file
 * Module file.
 */

/**
 * Implements hook_entity_type_alter().
 */
function cognito_entity_type_alter(array &$entity_types) {
  /** @var \Drupal\cognito\CognitoFlowManager $manager */
  $manager = \Drupal::service('plugin.manager.cognito.cognito_flow');
  $flow = $manager->getSelectedFlow();

  /** @var \Drupal\Core\Entity\EntityTypeInterface[] $entity_types */
  $entity_types['user']->setFormClass('register', $flow->getFormClass('signup'));

  $entity_types['user']->setFormClass('default', $flow->getFormClass('profile'));

  $entity_types['user']->setFormClass('admin_register', $flow->getFormClass('admin_signup'));
}
