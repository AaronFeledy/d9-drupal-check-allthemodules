services:
  cognito.user_routes_alter:
    class: Drupal\cognito\Routing\RouteSubscriber
    arguments: ['@plugin.manager.cognito.cognito_flow']
    tags:
      - { name: 'event_subscriber' }

  cognito.cognito_identity_provider:
    class: Aws\CognitoIdentityProvider\CognitoIdentityProviderClient
    factory: Drupal\cognito\Aws\CognitoIdentityProviderClientFactory::create
    arguments: ['@settings']

  cognito.aws:
    class: Drupal\cognito\Aws\Cognito
    factory: Drupal\cognito\Aws\CognitoFactory::create
    arguments: ['@settings', '@cognito.cognito_identity_provider', '@http_client']

  plugin.manager.cognito.cognito_flow:
    class: Drupal\cognito\CognitoFlowManager
    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler']

  cognito.messages:
    class: Drupal\cognito\CognitoMessages
    arguments: ['@config.factory']
