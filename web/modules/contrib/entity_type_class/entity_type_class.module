<?php

/**
 * @file
 * Provides a plugin based system to alter entity type classes.
 */

/**
 * Implements hook_entity_type_alter().
 */
function entity_type_class_entity_type_alter(array &$entity_types) {
  $pluginManager = Drupal::service('plugin.manager.entity_type_class.entity_type_class_manager');

  foreach ($pluginManager->getDefinitions() as $pluginId => $pluginData) {
    if (isset($entity_types[$pluginData['entity']])) {
      $entity_types[$pluginData['entity']]->setHandlerClass('storage', $pluginData['class']);
    }
  }
}
