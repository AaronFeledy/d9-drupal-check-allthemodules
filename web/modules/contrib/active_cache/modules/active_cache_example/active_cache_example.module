<?php
/**
 * @file contains hooks for the active_cache module.
 */
use Drupal\node\Entity\Node;
use Drupal\node\Entity\NodeType;

/**
 * Implements hook_install().
 */
function active_cache_example_install() {
  $random = new \Drupal\Component\Utility\Random();
  $lorem_ipsum = new \Badcow\LoremIpsum\Generator();

  foreach (range(0, 511) as $i) {
    $values = [
      'type' => 'active_cache_example',
      'title' => $random->name(rand(5, 12), TRUE),
      'body' => '<p>' . implode('</p></br><p>', array_filter($lorem_ipsum->getParagraphs(rand(1, 10)))) . '</p>',
      'status' => 1,
      'promote' => rand(0, 1),
      'sticky' => rand(0, 1),
    ];
    $node = Node::create($values);
    $node->save();
  }
}

/**
 * Implements hook_uninstall().
 */
function active_cache_example_uninstall() {
  $storage = \Drupal::entityTypeManager()->getStorage('node');
  $nodes = $storage->loadByProperties(['type' => 'active_cache_example']);
  $storage->delete($nodes);
  NodeType::load('active_cache_example')->delete();
}