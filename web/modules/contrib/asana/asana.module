<?php

/**
 * @file
 * Contains asana.module.
 */

use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Url;

/**
 * Implements hook_help().
 */
function asana_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    // Main module help.
    case 'help.page.asana':

      $asana = [
        ':asana' => Url::fromUri('https://asana.com')->toString(),
      ];

      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Allows the integration between <a href=":asana">Asana</a> and Drupal.', $asana);
      $output .= '<h3>' . t('Uses') . '</h3>';
      $output .= '<dl>';

      $routes = [
        ':settings-page' => Url::fromRoute('asana.asana_admin_settings')->toString(),
        ':asana' => $asana[':asana'],
      ];

      $output .= '<dt>' . t('Configuring module settings') . '</dt>';
      $output .= '<dd>' . t('To configure the module settings visit the <a href=":settings-page">Settings</a> page, in the Personal Access Token field enter your Asana Personal Access Token. To generate the token in <a href=":asana">Asana</a> go to: My profile settings... » Apps » Manage Developer Apps » Personal Access Tokens » Create New Personal Access Token. For add the Personal Access Token in the site you need the <em>Administer Asana</em> permission.', $routes) . '</dd>';
      $output .= '<dt>' . t('Available blocks') . '</dt>';
      $output .= '<ul>';
      $output .= '<li>Asana Projects: List of projects.</li>';
      $output .= '</ul>';
      return $output;
  }
}
