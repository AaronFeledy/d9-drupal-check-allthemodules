<?php

function ops_theme($existing, $type, $theme, $path) {
  $config = \Drupal::config('ops.settings');
  $ops_placeholder = !empty($config->get('ops_placeholder')) ? $config->get('ops_placeholder') : "Search Here On This Page";
  return array(
    'block__on_page_search' => array(
      'variables' => array('placeholder' => $ops_placeholder),
    )
  );
}

function ops_preprocess_html(&$variables) {
  $config = \Drupal::config('ops.settings');
  $ops_bk_color =  !empty($config->get('ops_bk_color')) ? $config->get('ops_bk_color') : "#f5f510";
  $ops_text_color = !empty($config->get('ops_text_color')) ? $config->get('ops_text_color') : "#000000"; 
  $variables['#attached']['library'][] = 'ops/onpagesearch';
  $variables['#attached']['drupalSettings']['ops']['onpagesearch']['ops_bk_color'] = $ops_bk_color;
  $variables['#attached']['drupalSettings']['ops']['onpagesearch']['ops_text_color'] = $ops_text_color;
}