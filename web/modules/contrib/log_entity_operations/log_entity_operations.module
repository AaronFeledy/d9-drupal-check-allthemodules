<?php

/**
 * @file
 * Module file.
 */

use Drupal\Core\Entity\EntityInterface;

/**
 * Implements hook_entity_load().
 */
function log_entity_operations_entity_load(array $entities, $entity_type_id) {
  foreach ($entities as $entity) {
    $entity->originalArrayForDiff = $entity->toArray();
  }
}

/**
 * Implements hook_entity_insert().
 */
function log_entity_operations_entity_insert(EntityInterface $entity) {
  /** @var \Drupal\log_entity_operations\Service\LogEntityOperationsManager $manager */
  $manager = \Drupal::service('log_entity_operations.manager');
  $manager->logUpdate($entity, 'update');
}

/**
 * Implements hook_entity_update().
 */
function log_entity_operations_entity_update(EntityInterface $entity) {
  /** @var \Drupal\log_entity_operations\Service\LogEntityOperationsManager $manager */
  $manager = \Drupal::service('log_entity_operations.manager');
  $manager->logUpdate($entity, 'update');
}

/**
 * Implements hook_entity_delete().
 */
function log_entity_operations_entity_delete(EntityInterface $entity) {
  /** @var \Drupal\log_entity_operations\Service\LogEntityOperationsManager $manager */
  $manager = \Drupal::service('log_entity_operations.manager');
  $manager->logUpdate($entity, 'update');
}
