services:
  logger.channel.prefetcher:
    parent: logger.channel_base
    arguments: ['prefetcher']
  prefetcher.settings:
    class: Drupal\Core\Config\ImmutableConfig
    factory: config.factory:get
    arguments:
      - prefetcher.settings
  prefetcher:
    class: \Drupal\prefetcher\Service\Prefetcher
    arguments: ['@logger.channel.prefetcher', '@prefetcher.settings', '@database', '@lock', '@entity_type.manager', '@plugin.manager.prefetcher_crawler']
  plugin.manager.prefetcher_crawler:
    class: Drupal\prefetcher\PrefetcherCrawlerManager
    arguments: ['@config.factory']
    parent: default_plugin_manager
    tags:
      - { name: plugin_manager_cache_clear }
