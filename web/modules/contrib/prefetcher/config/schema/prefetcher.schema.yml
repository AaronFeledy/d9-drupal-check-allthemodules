prefetcher.settings:
  type: config_object
  label: 'Prefetcher settings'
  mapping:
    cron_limit:
      type: integer
      label: 'Maximum URLs to crawl on each cron run'
    retry_threshold:
      type: integer
      label: 'Maximum amount of retries for any errors given for http requests status >= 400'
    expiry:
      type: integer
      label: 'Uris with maximum expiry for prefetching'
    hosts:
      type: sequence
      label: 'Hosts'
      sequence:
        type: mapping
        label: 'Host'
        mapping:
          host:
            type: string
            label: 'Hostname or IP'
          scheme:
            type: string
            label: 'Protocol scheme (eg. http / https)'
          auth:
            type: mapping
            label: 'Pass HTTP authentication parameters with the requests.'
            mapping:
              use_auth:
                type: boolean
                label: 'Enable basic authentication'
              username:
                type: string
                label: 'username'
              password:
                type: string
                label: 'password'
          http_header:
            type: sequence
            label: 'Custom HTTP headers'
            sequence:
              type: string
              label: 'Custom HTTP header'
          domains:
            type: sequence
            label: 'Domains'
            sequence:
              type: string
              label: 'Domain'
    crawler:
      type: mapping
      label: 'Selected crawler implementation'
      mapping:
        plugin_id:
          type: string
          label: 'Selected plugin id'
        plugin_settings:
          type: prefetcher.plugin.crawler.[plugin_id]
          label: 'Plugins settings'

prefetcher.plugin.crawler.basic:
  type: mapping
  label: 'Basic Crawler settings'
  mapping:
    concurrency:
      type: integer
      label: 'Limit of concurrent requests'
    follow_links_xpath:
      type: mapping
      label: 'Follow pager links (not used yet)'
      mapping:
        xpath:
          type: string
          label: 'xpath'
        limit:
          type: integer
          label: 'Number of links to follow'
    allow_redirects:
      type: boolean
      label: 'Following redirects is allowed'
    verify:
      type: boolean
      label: 'Verify SSL certificate'
    connect_timeout:
      type: integer
      label: 'Connection timeout in seconds'
    read_timeout:
      type: integer
      label: 'Read timeout in seconds'
    timeout:
      type: integer
      label: 'Overall timeout in seconds'
