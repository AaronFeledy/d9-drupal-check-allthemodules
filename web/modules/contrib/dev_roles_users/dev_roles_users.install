<?php

/**
 * @file
 * Development Roles Users module install functions.
 */

use Drupal\dev_roles_users\Controller\DevRolesUsersController;

/**
 * Implements hook_install().
 */
function dev_roles_users_install() {

  $users = DevRolesUsersController::getUsersInfo();

  foreach ($users as $user_info) {

    if (user_load_by_name($user_info['name'])) {
      // We shouldn't mess with existing users. Skip user if they already exist.
      continue;
    }

    DevRolesUsersController::insertUserByInfo($user_info);
  }
}

/**
 * Implements hook_uninstall().
 */
function dev_roles_users_uninstall() {

  $users = DevRolesUsersController::getUsersInfo();

  foreach ($users as $user_info) {

    $loaded_user = user_load_by_name($user_info['name']);

    if ($loaded_user) {
      $loaded_user->delete();
    }
  }
}
