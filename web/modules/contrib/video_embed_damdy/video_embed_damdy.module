<?php

/**
 * @file
 * Module file for video_embed_damdy.
 */

/**
 * Implements hook_theme().
 */
function video_embed_damdy_theme() {
  $themes = [];

  $themes['video_embed_damdy'] = [
    'variables' => [
      'media_id' => '',
      'publisher_id' => '',
      'medias_xml_url' => '',
      'player_params_url' => '',
      'player_guid' => '',
      'autostart' => '0',
    ],
    'path' => drupal_get_path('module', 'video_embed_damdy') . '/templates',
  ];

  return $themes;
}

/**
 * Implements hook_library_info_build().
 */
function video_embed_damdy_library_info_build() {
  global $base_url;

  $libs = [];

  $config = \Drupal::configFactory()->getEditable('video_embed_damdy.settings');

  $libs['video-embed-damdy'] = [
    'js' => [
      $base_url . '/' . drupal_get_path('module', 'video_embed_damdy') . '/js/video_embed_damdy.js'  => [],
    ],
  ];

  if (!empty($config->get('damdy_player_css'))) {
    $libs['video-embed-damdy']['css'] = [
      'base' => [
        $config->get('damdy_player_css') => [],
      ],
    ];
  }

  return $libs;
}
