<?php

/**
 * @file
 * Utility module for cleaning up after failed cron jobs.
 */

/**
 * Implements hook_menu().
 */
function semiclean_menu() {
  return array('admin/reports/status/semiclean' => array(
    'title' => 'Semiclean',
    'access arguments' => array('administer site configuration'),
    'page callback' => '_semiclean_do_your_magic',
    'type' => MENU_CALLBACK,
  ));
}

/**
 * Menu callback to delete the cron semaphore.
 */
function _semiclean_do_your_magic() {
  drupal_cron_cleanup();
  drupal_set_message(t('Cron semaphore cleaned.'), 'status');
  drupal_goto('admin/reports/status');
}
