services:
  plugin.manager.healthcheck_plugin:
    class: Drupal\healthcheck\Plugin\HealthcheckPluginManager
    parent: default_plugin_manager

  healthcheck.checkconfig:
    class: Drupal\healthcheck\CheckConfigService
    arguments: ['@plugin.manager.healthcheck_plugin']

  healthcheck:
    class: Drupal\healthcheck\HealthcheckService
    arguments: ['@healthcheck.checkconfig', '@config.factory', '@queue', '@datetime.time', '@state', '@event_dispatcher']

  healthcheck.finding:
    class: Drupal\healthcheck\FindingService
    arguments: ['@module_handler', '@theme_handler', '@plugin.manager.healthcheck_plugin', '@cache.default']

  healthcheck.watchdog_subscriber:
    class: Drupal\healthcheck\EventSubscriber\WatchdogCheckSubscriber
    arguments: ['@logger.factory']
    tags:
      - { name: event_subscriber }
