services:
  ext_redirect.helper:
    class: Drupal\ext_redirect\RedirectRuleHelper
    arguments: ['@database']
  ext_redirect.request:
    class: Drupal\ext_redirect\EventSubscriber\EventSubscriber
    arguments: ['@ext_redirect.current_url','@ext_redirect.config', '@ext_redirect.cacheable_rule_matcher']
    tags:
      - { name: event_subscriber }

  ext_redirect.config:
    class: Drupal\ext_redirect\Service\ExtRedirectConfig
    arguments: ['@config.factory']

  ext_redirect.repository:
    class: Drupal\ext_redirect\Service\RedirectRuleRepository
    arguments: ['@entity_type.manager', '@database']

  ext_redirect.rule_matcher:
    class: Drupal\ext_redirect\Service\RedirectRuleMatcher
    arguments: ['@ext_redirect.repository']

  ext_redirect.current_url:
    class: Drupal\ext_redirect\Service\CurrentUrl
    arguments: ['@request_stack', '@path.current', '@path.alias_manager', '@current_route_match', '@router.admin_context', '@path.matcher']

  ext_redirect.cacheable_rule_matcher:
    class: Drupal\ext_redirect\Service\CacheableRedirectRuleMatcher
    arguments: ['@ext_redirect.repository']

