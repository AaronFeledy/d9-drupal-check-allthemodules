id: gitlab_time_tracker_node_issue
migration_group: gitlab_time_tracker
label: 'Gitlab issue'
source:
  plugin: gitlab_issue
  track_changes: true
  project_id: 1
process:
  title: title
  body: description
  field_gitlab_id: id
  field_gitlab_iid: iid
  langcode:
    plugin: default_value
    source: language
    default_value: und
  uid:
    -
      plugin: extract
      source: author
      index:
        - id
    -
      plugin: migration_lookup
      migration: gitlab_time_tracker_user
      no_stub: true
    -
      plugin: default_value
      default_value: 1

  field_user:
    -
      plugin: extract
      source: author
      index:
        - id
    -
      plugin: migration_lookup
      migration: gitlab_time_tracker_user
      no_stub: true
    -
      plugin: default_value
      default_value: 1
  status:
      plugin: default_value
      default_value: 1
  field_project:
      plugin: migration_lookup
      source: project_id
      migration: gitlab_time_tracker_node_project
      no_stub: true

destination:
  plugin: 'entity:node'
  default_bundle: issue
migration_dependencies:
  required:
    - user
