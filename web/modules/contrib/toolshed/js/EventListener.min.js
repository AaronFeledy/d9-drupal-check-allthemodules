"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(s){s.EventListener=function(){function i(e,t,n){_classCallCheck(this,i),n=n||{},this.elem=e,this.event=t,this.method=n.method||"on"+s.pascalCase(t),this.autoListen=n.autoListen||!1,this.listeners=[],n.debounce&&(this.debounce="boolean"==typeof n.debounce?100:n.debounce),this.eventOpts={capture:n.capture||!1,passive:n.passive||!1}}return _createClass(i,[{key:"_run",value:function(t){var n=this;this.listeners.forEach(function(e){return e[n.method](t)},this)}},{key:"_callEvent",value:function(t,n){this.listeners.forEach(function(e){e[t]&&e[t](n)})}},{key:"_validateListener",value:function(e){return Boolean(e[this.method])}},{key:"trigger",value:function(e){return this._run(e||new Event(this.event),!0),this}},{key:"listen",value:function(){return this.callback||this.autoListen&&!this.listeners.length||(this.callback=this.debounce&&0<this.debounce&&Drupal.debounce?Drupal.debounce(this._run.bind(this),this.debounce):this._run.bind(this),this.elem.addEventListener(this.event,this.callback,this.eventOpts)),this}},{key:"ignore",value:function(){return this.callback&&(this.elem.removeEventListener(this.event,this.callback),delete this.callback),this}},{key:"add",value:function(e,t){return this._validateListener(e)&&(this.remove(e),null!==t&&0<=t?this.listeners.splice(t-1,0,e):this.listeners.push(e),this.autoListen&&this.listen()),this}},{key:"addBefore",value:function(e,t){var n=0;return t&&(n=this.listeners.indexOf(t)),this.add(e,n)}},{key:"addAfter",value:function(e,t){var n=null;return t&&(n=0<=(n=this.listeners.indexOf(t))?n+1:-1),this.add(e,n)}},{key:"remove",value:function(e){for(var t=this.listeners.indexOf(e);0<=t;)this.listeners.splice(t,1),t=this.listeners.indexOf(e);return this.autoListen&&!this.listeners.length&&this.ignore(),this}},{key:"destroy",value:function(){this.ignore()}}]),i}(),s.MediaQueryListener=function(e){function n(e,t){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,null,"mediaQuery",t));return i.mode=null,i.bps=[],i.queryMap={},e.forEach(function(e){var t=window.matchMedia(e.mediaQuery),n=s.pascalCase(e.event);i.bps.push(t),i.queryMap[e.mediaQuery]={event:n,inverted:e.inverted||!1}},i),i}return _inherits(n,s.EventListener),_createClass(n,[{key:"_changeMode",value:function(e){var t=this.mode;e!==t&&(t&&this._callEvent("off"+t),e&&this._callEvent("on"+e),this.mode=e)}},{key:"_run",value:function(e){var t=this.queryMap[e.media]||{event:null,inverted:!1},n=!e.matches!=!t.inverted?t.event:this.checkBreakpoints();this._changeMode(n)}},{key:"_validateListener",value:function(){return!0}},{key:"checkBreakpoints",value:function(){for(var e=0;e<this.bps.length;++e){var t=this.bps[e].media,n=this.queryMap[t]||{event:null,inverted:!1};if(!this.bps[e].matches!=!n.inverted)return n.event}}},{key:"listen",value:function(){var t=this;this.callback||this.autoListen&&!this.listeners.length||(this.callback=this._run.bind(this),this.bps.forEach(function(e){return e.addListener(t.callback)},this))}},{key:"ignore",value:function(){var t=this;this.callback&&(this.bps.forEach(function(e){return e.removeListener(t.callback)},this),delete this.callback)}}]),n}()}(Drupal.Toolshed);