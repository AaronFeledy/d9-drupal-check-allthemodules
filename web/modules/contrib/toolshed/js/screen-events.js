'use strict';

(function ($, Toolshed, settings) {
  var defaultOpts = {
    autoListen: true, // Register and deregister the event automatically.
    debounce: settings.eventDebounce,
    passive: true
  };

  // Initialize the Toolshed global listeners and window objects.
  Toolshed.winOffset = { top: 0, left: 0 };
  Toolshed.winRect = new Toolshed.Geom.Rect(0, 0, window.innerWidth, window.innerHeight);
  Toolshed.events = {};

  /**
   * Create a global event listener for window scroll events.
   *
   * Toolshed JS scroll event does additional calculations to maintain the
   * visibile window space still available to listener items. This helps for
   * layouts, dockers and other screen elements that need to know their
   * workable space taken by other Toolshed JS libraries.
   *
   * @type {EventListener}
   */
  Toolshed.events.scroll = new Toolshed.EventListener(window, 'scroll', defaultOpts);
  Toolshed.events.scroll._run = function _run(e) {
    var rect = new Toolshed.Geom.Rect(Toolshed.winRect);
    var scroll = {
      left: document.documentElement.scrollLeft || document.body.scrollLeft,
      top: document.documentElement.scrollTop || document.body.scrollTop
    };

    this.listeners.forEach(function (listener) {
      return listener.onScroll(e, rect, scroll);
    });
  };

  /**
   * Create a global event listener for window resize events.
   *
   * The global resize event listener is overridden to pass the available
   * window size and position to
   *
   * @type {EventListener}
   */
  Toolshed.events.resize = new Toolshed.EventListener(window, 'resize', defaultOpts);
  Toolshed.events.resize._run = function _run(e) {
    var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    var right = window.innerWidth || window.clientWidth;
    var bottom = window.innerHeight || window.clientHeight;

    // Only trigger if the size has changed in some way.
    if (Toolshed.winRect.bottom !== bottom || Toolshed.winRect.top !== Toolshed.winOffset.top || Toolshed.winRect.right !== right || Toolshed.winRect.left !== Toolshed.winOffset.left || force) {
      Toolshed.winRect.top = Toolshed.winOffset.top;
      Toolshed.winRect.left = Toolshed.winOffset.left;
      Toolshed.winRect.right = right;
      Toolshed.winRect.bottom = bottom;

      var rect = new Toolshed.Geom.Rect(Toolshed.winRect);
      this.listeners.forEach(function (listener) {
        return listener.onResize(e, rect);
      });
    }
  };

  // Defer creating and using this mql until after the document is ready.
  if (settings && settings.breakpoints) {
    Toolshed.events.mediaQueries = new Toolshed.MediaQueryListener(settings.breakpoints, defaultOpts);
  }

  /**
   * When the DOM is ready, start listening for the MediaQuery events
   * and keep track of the offset created by the admin too bar.
   */
  $(function () {
    $(document).on('drupalViewportOffsetChange.toolbar', function () {
      var toolbar = $('#toolbar-bar');
      var tooltray = $('.toolbar-tray.is-active', toolbar);

      Toolshed.winOffset.top = $('body').hasClass('toolbar-fixed') ? toolbar.height() : 0;

      if (tooltray.length) {
        if (tooltray.hasClass('toolbar-tray-horizontal')) Toolshed.winOffset.top += tooltray.height();else if (tooltray.hasClass('toolbar-tray-vertical')) Toolshed.winOffset.left = tooltray.width();
      }

      Toolshed.events.resize.trigger();
    });

    // Run the initial resize callback if the toolbar has already loaded.
    if ($('#toolbar-bar').height()) {
      $(document).trigger('drupalViewportOffsetChange.toolbar');
    }
  });
})(jQuery, Drupal.Toolshed, drupalSettings.Toolshed);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmVlbi1ldmVudHMuZXM2LmpzIl0sIm5hbWVzIjpbIiQiLCJUb29sc2hlZCIsInNldHRpbmdzIiwiZGVmYXVsdE9wdHMiLCJhdXRvTGlzdGVuIiwiZGVib3VuY2UiLCJldmVudERlYm91bmNlIiwicGFzc2l2ZSIsIndpbk9mZnNldCIsInRvcCIsImxlZnQiLCJ3aW5SZWN0IiwiR2VvbSIsIlJlY3QiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJldmVudHMiLCJzY3JvbGwiLCJFdmVudExpc3RlbmVyIiwiX3J1biIsImUiLCJyZWN0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxMZWZ0IiwiYm9keSIsInNjcm9sbFRvcCIsImxpc3RlbmVycyIsImZvckVhY2giLCJsaXN0ZW5lciIsIm9uU2Nyb2xsIiwicmVzaXplIiwiZm9yY2UiLCJyaWdodCIsImNsaWVudFdpZHRoIiwiYm90dG9tIiwiY2xpZW50SGVpZ2h0Iiwib25SZXNpemUiLCJicmVha3BvaW50cyIsIm1lZGlhUXVlcmllcyIsIk1lZGlhUXVlcnlMaXN0ZW5lciIsIm9uIiwidG9vbGJhciIsInRvb2x0cmF5IiwiaGFzQ2xhc3MiLCJoZWlnaHQiLCJsZW5ndGgiLCJ3aWR0aCIsInRyaWdnZXIiLCJqUXVlcnkiLCJEcnVwYWwiLCJkcnVwYWxTZXR0aW5ncyJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxDQUFDLFVBQUNBLENBQUQsRUFBSUMsUUFBSixFQUFjQyxRQUFkLEVBQTJCO0FBQzFCLE1BQU1DLGNBQWM7QUFDbEJDLGdCQUFZLElBRE0sRUFDQTtBQUNsQkMsY0FBVUgsU0FBU0ksYUFGRDtBQUdsQkMsYUFBUztBQUhTLEdBQXBCOztBQU1BO0FBQ0FOLFdBQVNPLFNBQVQsR0FBcUIsRUFBRUMsS0FBSyxDQUFQLEVBQVVDLE1BQU0sQ0FBaEIsRUFBckI7QUFDQVQsV0FBU1UsT0FBVCxHQUFtQixJQUFJVixTQUFTVyxJQUFULENBQWNDLElBQWxCLENBQXVCLENB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QUFmLEVBQXFELFlBQU07QUFDekQsVUFBTUMsVUFBVTNDLEVBQUUsY0FBRixDQUFoQjtBQUNBLFVBQU00QyxXQUFXNUMsRUFBRSx5QkFBRixFQUE2QjJDLE9BQTdCLENBQWpCOztBQUVBMUMsZUFBU08sU0FBVCxDQUFtQkMsR0FBbkIsR0FBeUJULEVBQUUsTUFBRixFQUFVNkMsUUFBVixDQUFtQixlQUFuQixJQUFzQ0YsUUFBUUcsTUFBUixFQUF0QyxHQUF5RCxDQUFsRjs7QUFFQSxVQUFJRixTQUFTRyxNQUFiLEVBQXFCO0FBQ25CLFlBQUlILFNBQVNDLFFBQVQsQ0FBa0IseUJBQWxCLENBQUosRUFBa0Q1QyxTQUFTTyxTQUFULENBQW1CQyxHQUFuQixJQUEwQm1DLFNBQVNFLE1BQVQsRUFBMUIsQ0FBbEQsS0FDSyxJQUFJRixTQUFTQyxRQUFULENBQWtCLHVCQUFsQixDQUFKLEVBQWdENUMsU0FBU08sU0FBVCxDQUFtQkUsSUFBbkIsR0FBMEJrQyxTQUFTSSxLQUFULEVBQTFCO0FBQ3REOztBQUVEL0MsZUFBU2dCLE1BQVQsQ0FBZ0JlLE1BQWhCLENBQXVCaUIsT0FBdkI7QUFDRCxLQVpEOztBQWNBO0FBQ0EsUUFBSWpELEVBQUUsY0FBRixFQUFrQjhDLE1BQWxCLEVBQUosRUFBZ0M7QUFDOUI5QyxRQUFFdUIsUUFBRixFQUFZMEIsT0FBWixDQUFvQixvQ0FBcEI7QUFDRDtBQUNGLEdBbkJEO0FBb0JELENBL0ZELEVBK0ZHQyxNQS9GSCxFQStGV0MsT0FBT2xELFFBL0ZsQixFQStGNEJtRCxlQUFlbkQsUUEvRjNDIiwiZmlsZSI6InNjcmVlbi1ldmVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbigoJCwgVG9vbHNoZWQsIHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRPcHRzID0ge1xuICAgIGF1dG9MaXN0ZW46IHRydWUsIC8vIFJlZ2lzdGVyIGFuZCBkZXJlZ2lzdGVyIHRoZSBldmVudCBhdXRvbWF0aWNhbGx5LlxuICAgIGRlYm91bmNlOiBzZXR0aW5ncy5ldmVudERlYm91bmNlLFxuICAgIHBhc3NpdmU6IHRydWUsXG4gIH07XG5cbiAgLy8gSW5pdGlhbGl6ZSB0aGUgVG9vbHNoZWQgZ2xvYmFsIGxpc3RlbmVycyBhbmQgd2luZG93IG9iamVjdHMuXG4gIFRvb2xzaGVkLndpbk9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gIFRvb2xzaGVkLndpblJlY3QgPSBuZXcgVG9vbHNoZWQuR2VvbS5SZWN0KDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICBUb29sc2hlZC5ldmVudHMgPSB7fTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgZ2xvYmFsIGV2ZW50IGxpc3RlbmVyIGZvciB3aW5kb3cgc2Nyb2xsIGV2ZW50cy5cbiAgICpcbiAgICogVG9vbHNoZWQgSlMgc2Nyb2xsIGV2ZW50IGRvZXMgYWRkaXRpb25hbCBjYWxjdWxhdGlvbnMgdG8gbWFpbnRhaW4gdGhlXG4gICAqIHZpc2liaWxlIHdpbmRvdyBzcGFjZSBzdGlsbCBhdmFpbGFibGUgdG8gbGlzdGVuZXIgaXRlbXMuIFRoaXMgaGVscHMgZm9yXG4gICAqIGxheW91dHMsIGRvY2tlcnMgYW5kIG90aGVyIHNjcmVlbiBlbGVtZW50cyB0aGF0IG5lZWQgdG8ga25vdyB0aGVpclxuICAgKiB3b3JrYWJsZSBzcGFjZSB0YWtlbiBieSBvdGhlciBUb29sc2hlZCBKUyBsaWJyYXJpZXMuXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudExpc3RlbmVyfVxuICAgKi9cbiAgVG9vbHNoZWQuZXZlbnRzLnNjcm9sbCA9IG5ldyBUb29sc2hlZC5FdmVudExpc3RlbmVyKHdpbmRvdywgJ3Njcm9sbCcsIGRlZmF1bHRPcHRzKTtcbiAgVG9vbHNoZWQuZXZlbnRzLnNjcm9sbC5fcnVuID0gZnVuY3Rpb24gX3J1bihlKSB7XG4gICAgY29uc3QgcmVjdCA9IG5ldyBUb29sc2hlZC5HZW9tLlJlY3QoVG9vbHNoZWQud2luUmVjdCk7XG4gICAgY29uc3Qgc2Nyb2xsID0ge1xuICAgICAgbGVmdDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0LFxuICAgICAgdG9wOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLFxuICAgIH07XG5cbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyLm9uU2Nyb2xsKGUsIHJlY3QsIHNjcm9sbCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBnbG9iYWwgZXZlbnQgbGlzdGVuZXIgZm9yIHdpbmRvdyByZXNpemUgZXZlbnRzLlxuICAgKlxuICAgKiBUaGUgZ2xvYmFsIHJlc2l6ZSBldmVudCBsaXN0ZW5lciBpcyBvdmVycmlkZGVuIHRvIHBhc3MgdGhlIGF2YWlsYWJsZVxuICAgKiB3aW5kb3cgc2l6ZSBhbmQgcG9zaXRpb24gdG9cbiAgICpcbiAgICogQHR5cGUge0V2ZW50TGlzdGVuZXJ9XG4gICAqL1xuICBUb29sc2hlZC5ldmVudHMucmVzaXplID0gbmV3IFRvb2xzaGVkLkV2ZW50TGlzdGVuZXIod2luZG93LCAncmVzaXplJywgZGVmYXVsdE9wdHMpO1xuICBUb29sc2hlZC5ldmVudHMucmVzaXplLl9ydW4gPSBmdW5jdGlvbiBfcnVuKGUsIGZvcmNlID0gZmFsc2UpIHtcbiAgICBjb25zdCByaWdodCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IHdpbmRvdy5jbGllbnRXaWR0aDtcbiAgICBjb25zdCBib3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgd2luZG93LmNsaWVudEhlaWdodDtcblxuICAgIC8vIE9ubHkgdHJpZ2dlciBpZiB0aGUgc2l6ZSBoYXMgY2hhbmdlZCBpbiBzb21lIHdheS5cbiAgICBpZiAoVG9vbHNoZWQud2luUmVjdC5ib3R0b20gIT09IGJvdHRvbVxuICAgICAgfHwgVG9vbHNoZWQud2luUmVjdC50b3AgIT09IFRvb2xzaGVkLndpbk9mZnNldC50b3BcbiAgICAgIHx8IFRvb2xzaGVkLndpblJlY3QucmlnaHQgIT09IHJpZ2h0XG4gICAgICB8fCBUb29sc2hlZC53aW5SZWN0LmxlZnQgIT09IFRvb2xzaGVkLndpbk9mZnNldC5sZWZ0XG4gICAgICB8fCBmb3JjZVxuICAgICkge1xuICAgICAgVG9vbHNoZWQud2luUmVjdC50b3AgPSBUb29sc2hlZC53aW5PZmZzZXQudG9wO1xuICAgICAgVG9vbHNoZWQud2luUmVjdC5sZWZ0ID0gVG9vbHNoZWQud2luT2Zmc2V0LmxlZnQ7XG4gICAgICBUb29sc2hlZC53aW5SZWN0LnJpZ2h0ID0gcmlnaHQ7XG4gICAgICBUb29sc2hlZC53aW5SZWN0LmJvdHRvbSA9IGJvdHRvbTtcblxuICAgICAgY29uc3QgcmVjdCA9IG5ldyBUb29sc2hlZC5HZW9tLlJlY3QoVG9vbHNoZWQud2luUmVjdCk7XG4gICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyLm9uUmVzaXplKGUsIHJlY3QpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRGVmZXIgY3JlYXRpbmcgYW5kIHVzaW5nIHRoaXMgbXFsIHVudGlsIGFmdGVyIHRoZSBkb2N1bWVudCBpcyByZWFkeS5cbiAgaWYgKHNldHRpbmdzICYmIHNldHRpbmdzLmJyZWFrcG9pbnRzKSB7XG4gICAgVG9vbHNoZWQuZXZlbnRzLm1lZGlhUXVlcmllcyA9IG5ldyBUb29sc2hlZC5NZWRpYVF1ZXJ5TGlzdGVuZXIoXG4gICAgICBzZXR0aW5ncy5icmVha3BvaW50cyxcbiAgICAgIGRlZmF1bHRPcHRzLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogV2hlbiB0aGUgRE9NIGlzIHJlYWR5LCBzdGFydCBsaXN0ZW5pbmcgZm9yIHRoZSBNZWRpYVF1ZXJ5IGV2ZW50c1xuICAgKiBhbmQga2VlcCB0cmFjayBvZiB0aGUgb2Zmc2V0IGNyZWF0ZWQgYnkgdGhlIGFkbWluIHRvbyBiYXIuXG4gICAqL1xuICAkKCgpID0+IHtcbiAgICAkKGRvY3VtZW50KS5vbignZHJ1cGFsVmlld3BvcnRPZmZzZXRDaGFuZ2UudG9vbGJhcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvb2xiYXIgPSAkKCcjdG9vbGJhci1iYXInKTtcbiAgICAgIGNvbnN0IHRvb2x0cmF5ID0gJCgnLnRvb2xiYXItdHJheS5pcy1hY3RpdmUnLCB0b29sYmFyKTtcblxuICAgICAgVG9vbHNoZWQud2luT2Zmc2V0LnRvcCA9ICQoJ2JvZHknKS5oYXNDbGFzcygndG9vbGJhci1maXhlZCcpID8gdG9vbGJhci5oZWlnaHQoKSA6IDA7XG5cbiAgICAgIGlmICh0b29sdHJheS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHRvb2x0cmF5Lmhhc0NsYXNzKCd0b29sYmFyLXRyYXktaG9yaXpvbnRhbCcpKSBUb29sc2hlZC53aW5PZmZzZXQudG9wICs9IHRvb2x0cmF5LmhlaWdodCgpO1xuICAgICAgICBlbHNlIGlmICh0b29sdHJheS5oYXNDbGFzcygndG9vbGJhci10cmF5LXZlcnRpY2FsJykpIFRvb2xzaGVkLndpbk9mZnNldC5sZWZ0ID0gdG9vbHRyYXkud2lkdGgoKTtcbiAgICAgIH1cblxuICAgICAgVG9vbHNoZWQuZXZlbnRzLnJlc2l6ZS50cmlnZ2VyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBSdW4gdGhlIGluaXRpYWwgcmVzaXplIGNhbGxiYWNrIGlmIHRoZSB0b29sYmFyIGhhcyBhbHJlYWR5IGxvYWRlZC5cbiAgICBpZiAoJCgnI3Rvb2xiYXItYmFyJykuaGVpZ2h0KCkpIHtcbiAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ2RydXBhbFZpZXdwb3J0T2Zmc2V0Q2hhbmdlLnRvb2xiYXInKTtcbiAgICB9XG4gIH0pO1xufSkoalF1ZXJ5LCBEcnVwYWwuVG9vbHNoZWQsIGRydXBhbFNldHRpbmdzLlRvb2xzaGVkKTtcbiJdfQ==
