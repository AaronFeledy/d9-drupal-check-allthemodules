<?php

/**
 * @file
 * Provides iTunes namespace, <channel> and <item> elements for Views RSS module.
 */

use Drupal\Core\Url;

/**
 * Implements hook_views_rss_namespaces().
 */
function views_rss_google_products_views_rss_namespaces() {
  $namespaces['g'] = array(
    'prefix' => 'xmlns',
    'uri' => 'http://base.google.com/ns/1.0',
  );
  return $namespaces;
}

/**
 * Implements hook_views_rss_element_groups().
 */
function views_rss_google_products_views_rss_element_groups() {
  return array(
    'basic' => array(
      'title' => t('Basic Product Information'),
    ),
    'price' => array(
      'title' => t('Availability & Price'),
    ),
    'identifiers' => array(
      'title' => t('Unique Product Identifiers'),
    ),
    'apparel' => array(
      'title' => t('Apparel Products'),
      'description' => t('Apparel includes all products that fall under "Apparel & Accessories" (including all sub-categories) in <a href="!taxonomy_url">Google\'s product taxonomy</a>.', array(
        '!taxonomy_url' => Url::fromUri('http://support.google.com/merchants/bin/answer.py?answer=160081'),
      ))
    ),
    'variants' => array(
      'title' => t('Product Variants'),
      'description' => '<p>' . t('We define variants as a group of identical products that only differ by the attributes "color", "material", "pattern", or "size".') . '</p>'
        . '<p>' . t('Variant-level information is required only for products in the "Apparel & Accessories" category, and all related subcategories. Apparel variants are only <strong>required</strong> for feeds targeting the US. For feeds targeting other countries, the attributes are recommended and may be required in the future.') . '</p>',
    ),
    'tax' => array(
      'title' => t('Tax & Shipping'),
      'description' => t('Taxes and shipping are an important part of the total cost of items. In fact, shipping cost is the most common reason for users abandoning their shopping choices. The "tax" attribute is only applicable to feeds targeting the US - for all other countries, value added tax (VAT) has to be included in the price.'),
    ),
    'combinations' => array(
      'title' => t('Product Combinations'),
      'description' => t('These attributes allow you to submit information about merchant-defined multipacks and merchant-defined bundles.'),
    ),
    'adult' => array(
      'title' => t('Adult Products'),
      'description' => t('Google cares about the family status of the product listings you submit in order to make sure that appropriate content is shown to an appropriate audience. You should use the "adult" attribute to indicate that individual items will be considered "adult".'),
    ),
    'adwords' => array(
      'title' => t('AdWords Attributes'),
      'description' => t('These attributes help you to organize your AdWords campaigns and track the traffic to your website.'),
    ),
    'custom_label' => array(
      'title' => t('Custom Label Attributes for Shopping Campaigns'),
      'description' => t('Shopping campaigns are a better way to use Product Listing Ads and promote your products online using retail-centric tools to manage and optimize your campaigns. With Shopping campaigns, you create product groups based on the attributes for your product data, and then set bids on those product groups.'),
    ),
    'additional' => array(
      'title' => t('Additional Attributes'),
      'description' => t('The two attributes below allow you to control the destination of your items, and the period during which your items are valid.'),
    ),
    'unit_prices' => array(
      'title' => t('Unit Prices (EU Countries and Switzerland Only)'),
      'description' => t('These attributes allow you to submit the unit pricing for your applicable products in feeds targeting European Union countries and Switzerland.'),
    ),
    'energy_labels' => array(
      'title' => t('Energy Labels (EU Countries and Switzerland Only)'),
      'description' => t('This attribute allows you to submit the energy label for your applicable products in feeds targeting European Union countries and Switzerland.'),
    ),
    'merchant_promotions' => array(
      'title' => t('Merchant Promotions Attribute'),
      'description' => t('For retailers using Merchant Promotions, the "promotion id" attribute is used in both your products feed and your promotions feed to match products across the two feeds.'),
    ),
  );
}

/**
 * Implements hook_views_rss_item_elements().
 */
function views_rss_google_products_views_rss_item_elements() {
  return array(
    // Basic Product Information.
    'g:id' => array(
      'description' => t('The identifier for each item has to be unique within your account, and cannot be re-used between feeds. If you have multiple feeds, ids of items within different feeds must still be unique. You can use any sequence of letters and digits for the item id.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#id',
      'group' => 'basic',
    ),
    'g:title' => array(
      'description' => t('This is the name of your item which is required. We recommend you include characteristics such as color or brand in the title which differentiates the item from other products.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#title',
      'group' => 'basic',
    ),
    'g:description' => array(
      'description' => t('Include only information relevant to the item. Describe its most relevant attributes, such as size, material, intended age range, special features, or other technical specs. Also include details about the item’s most visual attributes, such as shape, pattern, texture, and design, since we may use this text for finding your item. We recommend that you submit around 500 to 1,000 characters, but you can submit up to 5,000 characters. Descriptions should follow standard grammar rules and end with a punctuation mark.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#description',
      'group' => 'basic',
    ),
    'g:google_product_category' => array(
      'description' => t('The "Google product category" attribute indicates the category of the product being submitted, according to the <a href="!taxonomy_url">Google product taxonomy</a>. This attribute accepts only one value, taken from the product taxonomy tree. If your items fall into multiple categories, include only one category which is the most relevant.', array(
        '!taxonomy_url' => Url::fromUri('http://support.google.com/merchants/bin/answer.py?answer=1705911'),
      )),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#google_product_category',
      'group' => 'basic',
    ),
    'g:product_type' => array(
      'description' => t('This attribute also indicates the category of the product being submitted, but you can provide your own classification. Unlike the "Google product category", you can include more than one "product type" attribute value if products apply to more than one category. Please include the full category string. For example, if your products belong in Refrigerators list the full string: Home & Garden > Kitchen & Dining > Kitchen Appliances > Refrigerators. Any separator such as > or / may be used.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#product_type',
      'group' => 'basic',
    ),
    'g:link' => array(
      'description' => t('The user is sent to this URL when your item is clicked on Google Shopping. We also refer to this as the <em>landing page</em>. It must point to a page showing the essentially identical item the user was looking at. You can use tracking URLs to distinguish users coming from Google Shopping.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#link',
      'group' => 'basic',
    ),
    'g:mobile_link' => array(
      'description' => t('You can use this attribute to provide links to mobile-optimized versions of the landing pages for your products.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#mobile_link',
      'group' => 'basic',
    ),
    'g:image_link' => array(
      'description' => t('This is the URL of an associated image for a product. Submit full-size images for your products and do not submit thumbnail versions of the images. For all apparel products, we require images of at least 250 x 250 pixels and recommend images of at least 400 x 400 pixels.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#image_link',
      'group' => 'basic',
    ),
    'g:additional_image_link' => array(
      'description' => t('If you have additional images for this item, include them in this attribute. For example, if you have images that show the product from a different angle than the main image, or if you have images of the packaging or the product in various settings.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#additional_image_link',
      'group' => 'basic',
    ),
    'g:condition' => array(
      'description' => t('There are only three accepted values: "new" (the product is brand-new and has never been used; it is in its original packaging which has not been opened), "refurbished" (the product has been restored to working order; this includes, for example, remanufactured printer cartridges) and "used" (if the two previous values don\'t apply; for example, if the product has been used before or the original packaging has been opened or is missing).'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#condition',
      'group' => 'basic',
    ),

    // Availability & Price.
    'g:availability' => array(
      'description' => t("Required for all items in feeds targeting the US, Japan, UK, Germany, France. Recommended for all other countries. However, you need to use this attribute with one of the following if you want to submit items that are out of stock in your data feed. If you don't use this attribute, all the items in your data feed must be in stock on your site."),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#availability',
      'group' => 'price',
    ),
    'g:availability_date' => array(
      'description' => t('If you are accepting orders for products that are available for preorder, use this attribute to indicate when the product becomes available for delivery.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#availability_date',
      'group' => 'price',
    ),
    'g:price' => array(
      'description' => t('The price of the item has to be the most prominent price on the landing page. If multiple items are on the same page with multiple prices, it has to be straightforward for the user to find the correct item and corresponding price.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#price',
      'group' => 'price',
    ),
    'g:sale_price' => array(
      'description' => t('Use this attribute to submit the advertised sale price of the item. Learn more about <a href="!info_url">submitting sale price information</a>.', array(
        '!info_url' => Url::fromUri('http://support.google.com/merchants/bin/answer.py?answer=1196048'),
      )),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#sale_price',
      'group' => 'price',
    ),
    'g:sale_price_effective_date' => array(
      'description' => t('Used in conjunction with sale price. This attribute indicates the date range during which the sale price applies.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#condition',
      'group' => 'price',
    ),

    // Unique Product Identifiers.
    'g:brand' => array(
      'description' => t('Brand of the item. Required for all items - except for books, media and custom made goods, or if you are providing "mpn" and "gtin".'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#brand',
      'group' => 'identifiers',
    ),
    'g:gtin' => array(
      'description' => t('In this attribute, you will include Global Trade Item Numbers (GTINs) for your products. These identifiers include UPC (in North America), EAN (in Europe), JAN (in Japan), and ISBN (for books).'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#gtin',
      'group' => 'identifiers',
    ),
    'g:mpn' => array(
      'description' => t('Manufacturer Part Number (MPN) of the item. This code uniquely identifies the product to its manufacturer. In particular, the combination of brand and MPN clearly specifies one product.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#mpn',
      'group' => 'identifiers',
    ),
    'g:identifier_exists' => array(
      'description' => t('In categories where unique product identifiers are required, merchants must submit the ‘identifier exists’ attribute with a value of FALSE when the item does not have unique product identifiers appropriate to its category, such as GTIN, MPN, and brand.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#identifier_exists',
      'group' => 'identifiers',
    ),

    // Apparel Products.
    'g:gender' => array(
      'description' => t('Gender of the item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#gender',
      'group' => 'apparel',
    ),
    'g:age_group' => array(
      'description' => t('Target age group of the item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#age_group',
      'group' => 'apparel',
    ),
    'g:color' => array(
      'description' => t('Dominant color of the item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#color',
      'group' => 'apparel',
    ),
    'g:size' => array(
      'description' => t('This indicates the size of a product. You may any provide values which are appropriate to your items. Examples for sizing values can be found <a href="!sizing_url">in this article</a>.', array(
        '!sizing_url' => Url::fromUri('http://support.google.com/merchants/bin/answer.py?answer=1347943'),
      )),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#size',
      'group' => 'apparel',
    ),
    'g:size_type' => array(
      'description' => t('Use this attribute to indicate the cut of your item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#size_type',
      'group' => 'apparel',
    ),
    'g:size_system' => array(
      'description' => t('Use this attribute to indicate the country’s sizing system in which you are submitting your item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#size_system',
      'group' => 'apparel',
    ),

    // Product Variants
    'g:item_group_id' => array(
      'description' => t('All items that are color/material/pattern/size variants of the same product must have the same item group id. If you have a "Parent SKU" that is shared by all variants of a product, you can provide that as the value for "item group id".'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#item_group_id',
      'group' => 'variants',
    ),
    'g:color' => array(
      'description' => t('This defines the dominant color(s) of an item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#color',
      'group' => 'variants',
    ),
    'g:material' => array(
      'description' => t('The material or fabric that a product is made out of. For example, a high heel pump might have values of "Leather", "Denim", "Suede", etc.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#material',
      'group' => 'variants',
    ),
    'g:pattern' => array(
      'description' => t('The pattern or graphic print featured on a product. For example, a t-shirt might have a logo of a sports team and have pattern values of "Bears", "Tigers", etc. A dress might come in two prints, and have pattern values of "Polka Dot", "Striped", "Paisley", etc.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#pattern',
      'group' => 'variants',
    ),
    'g:size' => array(
      'description' => t('This indicates the size of a product. You may any provide values which are appropriate to your items.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#size',
      'group' => 'variants',
    ),

    // Tax & Shipging
    'g:tax' => array(
      'description' => t('The tax attribute is an item-level override for merchant-level tax settings as defined in your Google Merchant Center account. This attribute is only accepted in the US, if your feed targets a country outside of the US, please do not use this attribute.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#tax',
      'group' => 'tax',
    ),
    'g:vat' => array(
      'description' => t('The vat attribute is an item-level override for merchant-level VAT settings as defined in your Google Merchant Center account. This attribute should be used if your feed targets a country outside of the US.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#vat',
      'group' => 'tax',
    ),
    'g:shipping' => array(
      'description' => t('This attribute provides the specific shipping estimate for the product. Providing this attribute for an item overrides the global shipping settings you defined in your Google Merchant Center settings.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#shipping',
      'group' => 'tax',
    ),
    'g:shipping_weight' => array(
      'description' => t('This is the weight of the product used to calculate the shipping cost of the item.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#shipping_weight',
      'group' => 'tax',
    ),
    'g:shipping_label' => array(
      'description' => t('This attribute can be used to assign labels to specific products using values of your choosing, such as perishable, bulky, or promotion. In your Merchant Center account shipping settings, you may then configure different shipping rates for items labeled perishable, bulky, and promotion.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#shipping_label',
      'group' => 'tax',
    ),

    // Product Combinations
    'g:multipack' => array(
      'description' => t('Multipacks are packages that include several identical products to create a larger unit of sale, submitted as a single item. Merchant-defined multipacks are custom groups of identical products submitted as a single unit of sale. The ‘multipack’ attribute indicates the number of identical products in a merchant-defined multipack.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#multipack',
      'group' => 'combinations',
    ),
    'g:is_bundle' => array(
      'description' => t("Merchant-defined bundles are custom groupings of different products defined by a merchant and sold together for a single price. A bundle features a main item sold with various accessories or add-ons, such as a camera combined with a bag and a lens. The main item of a bundle is the featured product of those items included in the bundle. Since they are defined by the merchant, these bundles as a whole unit typically do not have unique product identifiers. When submitting a merchant-defined bundle, use the 'is bundle' attribute and provide the unique product identifiers corresponding to the main item in the bundle. Using the 'is bundle' attribute for your merchant-defined bundles will allow you to distinguish them from multipacks and product listings that contain a main item only."),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#is_bundle',
      'group' => 'combinations',
    ),

    // Adult Products
    'g:adult' => array(
      'description' => t('Google cares about the family status of the product listings you submit in order to make sure that appropriate content is shown to an appropriate audience. You should use the ‘adult’ attribute to indicate that individual items will be considered “adult”.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#adult',
      'group' => 'adult',
    ),

    // AdWords Attributes
    'g:adwords_grouping' => array(
      'description' => t('Used to group products in an arbitrary way. It can be used for product filters to limit a campaign to a group of products, or product targets to bid differently for a group of products. Required if you want to bid differently on different subsets of products. It can only hold one value.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#adwords_grouping',
      'group' => 'adwords',
    ),
    'g:adwords_labels' => array(
      'description' => t('Very similar to adwords_grouping, but it will only only work on CPC. It can hold multiple values, allowing a product to be tagged with multiple labels.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#adwords_labels',
      'group' => 'adwords',
    ),
    'g:adwords_redirect' => array(
      'description' => t("Allows advertisers to specify a separate URL that can be used to track traffic coming from Google Shopping. If this attribute is provided, you must make sure that the URL provided through 'adwords redirect' will redirect to the same website as given in the ‘link’ or ‘mobile link’ attribute."),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#adwords_redirect',
      'group' => 'adwords',
    ),

    // Custom Label Attributes for Shopping Campaigns
    'g:custom_label_0' => array(
      'description' => t('This attribute can be used to group the items in a Shopping campaign by values of your choosing, such as seasonal or clearance.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#custom_label_0',
      'group' => 'custom_label',
    ),
    'g:custom_label_1' => array(
      'description' => t('This attribute can be used to group the items in a Shopping campaign by values of your choosing, such as seasonal or clearance.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#custom_label_1',
      'group' => 'custom_label',
    ),
    'g:custom_label_2' => array(
      'description' => t('This attribute can be used to group the items in a Shopping campaign by values of your choosing, such as seasonal or clearance.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#custom_label_2',
      'group' => 'custom_label',
    ),
    'g:custom_label_3' => array(
      'description' => t('This attribute can be used to group the items in a Shopping campaign by values of your choosing, such as seasonal or clearance.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#custom_label_3',
      'group' => 'custom_label',
    ),
    'g:custom_label_4' => array(
      'description' => t('This attribute can be used to group the items in a Shopping campaign by values of your choosing, such as seasonal or clearance.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#custom_label_4',
      'group' => 'custom_label',
    ),

    // Additional Attributes
    'g:excluded_destination' => array(
      'description' => t('If you are using Google Shopping and you would like to exclude the item from this destination.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#excluded_destination',
      'group' => 'additional',
    ),
    'g:expiration_date' => array(
      'description' => t('This is the date that an item listing will expire. If you do not provide this attribute, items will expire and no longer appear in Google Shopping results after 30 days. You cannot use this attribute to extend the expiration period to longer than 30 days.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#expiration_date',
      'group' => 'additional',
    ),

    // Unit Prices (EU Countries and Switzerland Only)
    'g:unit_pricing_measure' => array(
      'description' => t('The ‘unit pricing measure’ attribute allows you to specify unit pricing information for an item. This attribute defines the measure and dimension of an item, e.g. 135ml or 55g. The unit price refers to the volume, weight, area, or length of the product without any packaging or the net drained weight of the product (in the case of food).'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#unit_pricing_measure',
      'group' => 'unit_prices',
    ),
    'g:unit_pricing_base_measure' => array(
      'description' => t('The ‘unit pricing base measure’ attribute specifies your preference of the denominator of the unit price (e.g. 100ml). You should only submit this attribute if you also submit ‘unit pricing measure’.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#unit_pricing_base_measure',
      'group' => 'unit_prices',
    ),

    // Energy Labels (EU Countries and Switzerland Only)
    'g:energy_efficiency_class' => array(
      'description' => t('The ‘unit pricing base measure’ attribute specifies your preference of the denominator of the unit price (e.g. 100ml). You should only submit this attribute if you also submit ‘unit pricing measure’.'),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#energy_efficiency_class',
      'group' => 'energy_labels',
    ),

    // Merchant Promotions Attribute
    'g:promotion_id' => array(
      'description' => t("For retailers using Merchant Promotions, the 'promotion id' attribute is used in both your products feed and your promotions feed to match products across the two feeds."),
      'help' => 'https://support.google.com/merchants/answer/188494?hl=en#promotion_id',
      'group' => 'merchant_promotions',
    ),
  );
}
