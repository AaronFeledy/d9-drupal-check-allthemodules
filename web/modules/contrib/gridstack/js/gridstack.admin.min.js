!function(t,a,e,i,n){"use strict";function s(e,s){function r(e,i){function n(e){if(e.preventDefault(),e.currentTarget!==this)return!1;var i=t(this),n=i.data("message");o&&(d.collection.trigger("gridstack:main:"+n),a.gridstack.icon.build(s,!0))}var r=t(i),c={el:i,collection:f.loadCollection(i),isNested:v,options:{breakpoint:r.data("breakpoint"),icon:h.data("icon"),id:r.attr("id"),isNested:v,storage:r.data("storage"),useCss:1===r.data("framework"),nestedStorage:r.data("nestedStorage"),noMargin:t("#edit-options-settings-nomargin").prop("checked")}},d=f.loadGridStack(c),o=d.$el.hasClass("gridstack--main");C.push(d),d.render(),d.$el.hasClass("gridstack--main")&&h.off("click.gs.save").on("click.gs.save",".btn--main.btn--save",n)}function c(){var a;t(this).change(function(e){if(e.target===this){var n=t(this),s=t(n.data("target"));if(s.length&&(a=s.data("gridstack"),!i.isUndefined(a))){var r=n.val()?n.val():s.data("currentColumn");a.setGridWidth(r)}}}).change()}function d(a,e){var i=t(e),n=function(a){var e=a.data("target"),i=t(e),n=i.closest(".gridstack-preview--sub");if(i.length){var s=a.val(),r=s?parseInt(s):parseInt(i.data("responsiveWidth")),c=r<600?600:r;""!==s&&i.css({width:c,maxWidth:c>x?"":c}),n[""===s?"addClass":"removeClass"]("form-disabled")}};n(i),i.on("blur",function(a){if(a.target===this){var e=t(this);n(e)}})}function o(){h[k.prop("checked")?"addClass":"removeClass"]("is-framework")}function l(a){h.addClass("is-saving"),t(".vertical-tabs__menu li",h).removeClass("selected"),t(".vertical-tabs__menu li:last a",h).click(),t(".vertical-tabs__pane",h).css("display","block").addClass("visually-hidden"),t(".vertical-tabs__pane:last",h).removeClass("visually-hidden"),t('.btn--gridstack[data-message="save"]').each(function(){t(this).trigger("click")})}function g(a){if(a.preventDefault(),a.currentTarget!==this)return!1;var e=t(this),n=e.data("id"),s=e.data("pid"),r=e.data("message"),c=e.data("type")||"root",d=s||n;i.each(C,function(e,i){var s=e.getCurrentBox(d),o=t('.box[data-id="'+n+'"]',e.$el);e.collection.trigger("gridstack:"+c+":"+r,a,s,o)})}function u(t){if(t.preventDefault(),t.currentTarget!==this)return!1;w++;var e=w+1,n=new a.gridstack.models.Box({index:e});i.each(C,function(t,a){t.collection.add(n)})}var f=a.gridstack.ui,h=t(s),m='[data-drupal-selector="edit-options-use-framework"]',k=t(m,s),v=!0,p=t("#gridstack-icon"),b=p.attr("data-url")?p.attr("data-url"):"",C=[],w=0,x=n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,_=f.loadCollection(".gridstack--main");if(_.length&&_.each(function(t,a){a>w&&(w=a)}),t(".gridstack--root",s).each(r),o(),b){var y=new Date;t("#gridstack-screenshot",s).html('<img src="'+b+"?rand="+y.getTime()+'" alt="Icon" />')}h.find(".form-text--width").each(d),h.find(".form-select--column").each(c),h.off("click.gs.framework").on("click.gs.framework",m,o),h.off("click.gs.box").on("click.gs.box",".btn--box",g),h.off("click.gs.add").on("click.gs.add",".btn--main.btn--add",u),h.on("submit",l)}a.behaviors.gridStackAdmin={attach:function(a){t(".form--gridstack",a).once("form-gridstack").each(s)}}}(jQuery,Drupal,drupalSettings,_,this);
