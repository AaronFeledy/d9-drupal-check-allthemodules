{% if use_sync %}
  {% if sync.adjacent == "beforebegin" %}
    {{ content }}
  {% endif %}
  <{{ sync.wrapper_tag }}{{ sync.attributes }}>
  {% if sync.adjacent is empty or sync.adjacent == "afterbegin" or sync.adjacent == "beforeend" %}
    {{ content }}
  {% endif %}
    <script>
      window.mustacheSync = window.mustacheSync || {items: [], templates: []};
    {% if not template.summable %}
      window.mustacheSync.templates.push({
        name: '{{ template.name|raw }}',
        content: '{{ template.encoded|raw }}'
      });
    {% endif %}
    {% for item in sync.items %}
      window.mustacheSync.items.push({element: document.getElementById("{{ sync.attributes.id|raw }}"), template: "{{ template.name|raw }}", data: {{ item.data|raw }}{% if item.eval %}, eval: true{% endif %}{% if item.behaviors is defined %}, behaviors: {{ item.behaviors|raw }}{% endif %}{% if item.select %}, select: {{ item.select|raw }}{% endif %}{% if item.increment %}, increment: {{ item.increment|raw }}{% endif %}{% if item.delay %}, delay: {{ item.delay|raw }}{% endif %}{% if item.period %}, period: {{ item.period|raw }}{% endif %}{% if item.limit %}, limit: {{ item.limit|raw }}{% endif %}{% if item.trigger %}, trigger: {{ item.trigger|raw }}{% endif %}{% if item.adjacent %}, adjacent: {{ item.adjacent|raw }}{% endif %}});
    {% endfor %}
    </script>
  </{{ sync.wrapper_tag }}>
  {% if sync.adjacent == "afterend" %}
    {{ content }}
  {% endif %}
{% else %}
  {{ content }}
{% endif %}