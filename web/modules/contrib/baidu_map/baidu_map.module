<?php

/**
 * @file
 * Provides display of geographic and location data through the Baidu Map API.
 */

/**
 * Implements hook_help().
 */
function baidu_map_help($route_name) {
  $output = '';
  switch ($route_name) {
    case 'help.page.baidu_map':
      $output .= t('The Baidu Map module provides integration with the <a href="@bmapi_link">Baidu Map API</a> to allow display of geographic and location information on maps.<br/>Please configure module\'s settings by filling the form below:', array('@bmapi_link' => 'http://lbsyun.baidu.com/apiconsole/key'));
      break;

    default:
      break;
  }

  return $output;
}

function baidu_map_library_info_build() {
  $libraries = [];

  $config = \Drupal::config('baidu_map.settings');
  // Add a library whose information changes depending on certain conditions.
  $libraries['baidu_map_js'] = [
    'version' => '1.0',
    'header' => true,
    'js' => [
      'http://api.map.baidu.com/api?v=3.0&ak=' . $config->get('baidu_map_api_key') => [
        'type' => 'external'
      ]
    ],
  ];
  return $libraries;
}
