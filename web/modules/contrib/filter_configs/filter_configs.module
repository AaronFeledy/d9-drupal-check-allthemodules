<?php

/**
 * @file
 * Contains filter_configs.module.
 */

/**
 * Implements hook_preprocess_page().
 */
function filter_configs_preprocess_page(&$variables) {
  $current_path = \Drupal::service('path.current')->getPath();
  if ($current_path == "/admin/config") {
    $filter['container'] = [
      '#type' => 'container',
      '#attributes' => [
        'class' => ['config-filter-container', 'js-show'],
      ],
    ];

    $filter['container']['text'] = [
      '#type' => 'search',
      '#title' => t('Filter Configurations'),
      '#title_display' => 'invisible',
      '#size' => 30,
      '#placeholder' => t('Filter by name or description'),
      '#attributes' => [
        'class' => ['config-filter-filter-text'],
        'autocomplete' => 'off',
      ],
    ];

    $variables['page']['content']['#sorted'] = FALSE;
    $variables['page']['content']['config_filter'] = $filter;
    $variables['page']['content']['config_filter']['#weight'] = -1;
    $variables['page']['content']['#attached']['library'][] = 'filter_configs/drupal.filter_configs.filter';
  }
}
