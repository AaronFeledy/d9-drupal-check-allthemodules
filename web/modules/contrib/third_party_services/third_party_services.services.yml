parameters:
  third_party_services.default_vocabulary: third_party_services
  third_party_services.vocabulary_required_field: third_party_services_patterns

services:
  third_party_services.twig.third_party_services__configuration_form_url:
    class: Drupal\third_party_services\Twig\ConfigurationFormUrlTwigExtension
    arguments:
      - '@current_user'
    tags:
      - name: twig.extension

  third_party_services.raw_html_renderer:
    class: Drupal\third_party_services\RawHtmlRenderer
    arguments:
      - '@renderer'
      - '@html_response.attachments_processor'

  third_party_services.mediator:
    class: Drupal\third_party_services\Mediator
    arguments:
      - '@user.data'
      - '@current_user'
      - '@form_builder'
      - '@entity_type.manager'
      - '@third_party_services.raw_html_renderer'
      - '%third_party_services.default_vocabulary%'
      - '%third_party_services.vocabulary_required_field%'

  third_party_services.field_optional_render:
    class: Drupal\third_party_services\FieldOptionalRender
    arguments:
      - '@third_party_services.mediator'

  third_party_services.block_optional_render:
    class: Drupal\third_party_services\BlockOptionalRender
    arguments:
      - '@third_party_services.mediator'
